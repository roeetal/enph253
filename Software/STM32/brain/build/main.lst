ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.file	"main.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.section	.text.HAL_ADC_ConvCpltCallback,"ax",%progbits
  21              		.align	2
  22              		.global	HAL_ADC_ConvCpltCallback
  23              		.thumb
  24              		.thumb_func
  26              	HAL_ADC_ConvCpltCallback:
  27              	.LFB123:
  28              		.file 1 "Src/main.c"
   1:Src/main.c    **** 
   2:Src/main.c    **** /**
   3:Src/main.c    ****  ******************************************************************************
   4:Src/main.c    ****  * @file           : main.c
   5:Src/main.c    ****  * @brief          : Main program body
   6:Src/main.c    ****  ******************************************************************************
   7:Src/main.c    ****  ** This notice applies to any and all portions of this file
   8:Src/main.c    ****  * that are not between comment pairs USER CODE BEGIN and
   9:Src/main.c    ****  * USER CODE END. Other portions of this file, whether 
  10:Src/main.c    ****  * inserted by the user or by software development tools
  11:Src/main.c    ****  * are owned by their respective copyright owners.
  12:Src/main.c    ****  *
  13:Src/main.c    ****  * COPYRIGHT(c) 2018 STMicroelectronics
  14:Src/main.c    ****  *
  15:Src/main.c    ****  * Redistribution and use in source and binary forms, with or without modification,
  16:Src/main.c    ****  * are permitted provided that the following conditions are met:
  17:Src/main.c    ****  *   1. Redistributions of source code must retain the above copyright notice,
  18:Src/main.c    ****  *      this list of conditions and the following disclaimer.
  19:Src/main.c    ****  *   2. Redistributions in binary form must reproduce the above copyright notice,
  20:Src/main.c    ****  *      this list of conditions and the following disclaimer in the documentation
  21:Src/main.c    ****  *      and/or other materials provided with the distribution.
  22:Src/main.c    ****  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  23:Src/main.c    ****  *      may be used to endorse or promote products derived from this software
  24:Src/main.c    ****  *      without specific prior written permission.
  25:Src/main.c    ****  *
  26:Src/main.c    ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  27:Src/main.c    ****  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  28:Src/main.c    ****  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  29:Src/main.c    ****  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  30:Src/main.c    ****  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 2


  31:Src/main.c    ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  32:Src/main.c    ****  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  33:Src/main.c    ****  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  34:Src/main.c    ****  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  35:Src/main.c    ****  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  36:Src/main.c    ****  *
  37:Src/main.c    ****  ******************************************************************************
  38:Src/main.c    ****  */
  39:Src/main.c    **** /* Includes ------------------------------------------------------------------*/
  40:Src/main.c    **** #include "main.h"
  41:Src/main.c    **** #include "stm32f4xx_hal.h"
  42:Src/main.c    **** #include "adc.h"
  43:Src/main.c    **** #include "dma.h"
  44:Src/main.c    **** #include "i2c.h"
  45:Src/main.c    **** #include "tim.h"
  46:Src/main.c    **** #include "usart.h"
  47:Src/main.c    **** #include "gpio.h"
  48:Src/main.c    **** 
  49:Src/main.c    **** /* USER CODE BEGIN Includes */
  50:Src/main.c    **** #include "fonts.h"
  51:Src/main.c    **** #include "ssd1306.h"
  52:Src/main.c    **** #include "encoder.h"
  53:Src/main.c    **** #include "pid.h"
  54:Src/main.c    **** #include "filter.h"
  55:Src/main.c    **** #include "extern_vars.h"
  56:Src/main.c    **** #include <String.h>
  57:Src/main.c    **** #include "claw.h"
  58:Src/main.c    **** 
  59:Src/main.c    **** /* USER CODE END Includes */
  60:Src/main.c    **** 
  61:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  62:Src/main.c    **** 
  63:Src/main.c    **** /* USER CODE BEGIN PV */
  64:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  65:Src/main.c    **** uint16_t LEFT_SPEED = BASE_SPEED;
  66:Src/main.c    **** uint16_t RIGHT_SPEED = BASE_SPEED;
  67:Src/main.c    **** uint32_t dma_buffer[2048];
  68:Src/main.c    **** uint32_t adc_values[2048];
  69:Src/main.c    **** 
  70:Src/main.c    **** /* USER CODE END PV */
  71:Src/main.c    **** 
  72:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
  73:Src/main.c    **** void SystemClock_Config(void);
  74:Src/main.c    **** 
  75:Src/main.c    **** /* USER CODE BEGIN PFP */
  76:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
  77:Src/main.c    **** void print(char msg[], int row);
  78:Src/main.c    **** PID_t menu();
  79:Src/main.c    **** float calculate_heading(uint32_t adc_val);
  80:Src/main.c    **** void encoder_pid(PID_t *enc_pid);
  81:Src/main.c    **** void set_motor_speed(uint32_t channel, uint32_t speed);
  82:Src/main.c    **** void turn();
  83:Src/main.c    **** void turn_deg(uint8_t);
  84:Src/main.c    **** void alarm_detect();
  85:Src/main.c    **** void drive_straight(PID_t *enc_pid);
  86:Src/main.c    **** void square_edge(PID_t *enc_pid);
  87:Src/main.c    **** void test_All();
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 3


  88:Src/main.c    **** void test_PWM_htim1();
  89:Src/main.c    **** void test_PWM_htim3();
  90:Src/main.c    **** 
  91:Src/main.c    **** /* USER CODE END PFP */
  92:Src/main.c    **** 
  93:Src/main.c    **** /* USER CODE BEGIN 0 */
  94:Src/main.c    **** /**
  95:Src/main.c    ****  * @brief Circu;ar DMA buffer loading on each full buffer
  96:Src/main.c    ****  * DMA uses dma_buffer, transfers data to adc_values for us to use
  97:Src/main.c    ****  * Order of buffer: ir1, pi, ir1, ...
  98:Src/main.c    ****  */
  99:Src/main.c    **** void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef *hadc)
 100:Src/main.c    **** {
  29              		.loc 1 100 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              	.LVL0:
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
 101:Src/main.c    ****     memcpy(adc_values, dma_buffer, sizeof(dma_buffer));
  39              		.loc 1 101 0
  40 0002 0348     		ldr	r0, .L3
  41              	.LVL1:
  42 0004 0349     		ldr	r1, .L3+4
  43 0006 4FF40052 		mov	r2, #8192
  44 000a FFF7FEFF 		bl	memcpy
  45              	.LVL2:
  46 000e 08BD     		pop	{r3, pc}
  47              	.L4:
  48              		.align	2
  49              	.L3:
  50 0010 00000000 		.word	adc_values
  51 0014 00000000 		.word	dma_buffer
  52              		.cfi_endproc
  53              	.LFE123:
  55              		.global	__aeabi_ui2d
  56              		.global	__aeabi_dmul
  57              		.global	__aeabi_dsub
  58              		.global	__aeabi_d2f
  59              		.section	.text.calculate_heading,"ax",%progbits
  60              		.align	2
  61              		.global	calculate_heading
  62              		.thumb
  63              		.thumb_func
  65              	calculate_heading:
  66              	.LFB130:
 102:Src/main.c    **** }
 103:Src/main.c    **** /* USER CODE END 0 */
 104:Src/main.c    **** 
 105:Src/main.c    **** /**
 106:Src/main.c    ****  * @brief  The application entry point.
 107:Src/main.c    ****  *
 108:Src/main.c    ****  * @retval None
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 4


 109:Src/main.c    ****  */
 110:Src/main.c    **** int main(void)
 111:Src/main.c    **** {
 112:Src/main.c    ****     /* USER CODE BEGIN 1 */
 113:Src/main.c    **** 
 114:Src/main.c    ****     /* USER CODE END 1 */
 115:Src/main.c    **** 
 116:Src/main.c    ****     /* MCU Configuration----------------------------------------------------------*/
 117:Src/main.c    **** 
 118:Src/main.c    ****     /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
 119:Src/main.c    ****     HAL_Init();
 120:Src/main.c    **** 
 121:Src/main.c    ****     /* USER CODE BEGIN Init */
 122:Src/main.c    **** 
 123:Src/main.c    ****     /* USER CODE END Init */
 124:Src/main.c    **** 
 125:Src/main.c    ****     /* Configure the system clock */
 126:Src/main.c    ****     SystemClock_Config();
 127:Src/main.c    **** 
 128:Src/main.c    ****     /* USER CODE BEGIN SysInit */
 129:Src/main.c    **** 
 130:Src/main.c    ****     /* USER CODE END SysInit */
 131:Src/main.c    **** 
 132:Src/main.c    ****     /* Initialize all configured peripherals */
 133:Src/main.c    ****     MX_GPIO_Init();
 134:Src/main.c    ****     MX_DMA_Init();
 135:Src/main.c    ****     MX_TIM3_Init();
 136:Src/main.c    ****     MX_TIM1_Init();
 137:Src/main.c    ****     MX_TIM2_Init();
 138:Src/main.c    ****     MX_USART6_UART_Init();
 139:Src/main.c    ****     MX_ADC1_Init();
 140:Src/main.c    ****     MX_I2C1_Init();
 141:Src/main.c    ****     MX_TIM4_Init();
 142:Src/main.c    ****     MX_TIM9_Init();
 143:Src/main.c    ****     MX_TIM5_Init();
 144:Src/main.c    ****     /* USER CODE BEGIN 2 */
 145:Src/main.c    **** 
 146:Src/main.c    ****     /* Initialize peripherals */
 147:Src/main.c    ****     /* 
 148:Src/main.c    ****      * Claw jaw: TIM3 CH1
 149:Src/main.c    ****      * Claw arm: TIM3 CH2
 150:Src/main.c    ****      * Basket: TIM3 CH3
 151:Src/main.c    ****      * left forward: TIM1 CH1
 152:Src/main.c    ****      * left backward: TIM1 CH2
 153:Src/main.c    ****      * right forward: TIM1 CH3
 154:Src/main.c    ****      * right backward: TIM1 CH4
 155:Src/main.c    ****      * left encoder: TIM4
 156:Src/main.c    ****      * right encoderL TIM5
 157:Src/main.c    ****      * spare clocks: TIM2, TIM9
 158:Src/main.c    ****      */
 159:Src/main.c    **** 
 160:Src/main.c    ****     HAL_TIM_Encoder_Start(&htim4, TIM_CHANNEL_ALL);
 161:Src/main.c    ****     HAL_TIM_Encoder_Start(&htim5, TIM_CHANNEL_ALL);
 162:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_1);
 163:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_2);
 164:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_3);
 165:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_4);
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 5


 166:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_1);
 167:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_2);
 168:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_3);
 169:Src/main.c    **** 
 170:Src/main.c    ****     /* Initialize other stuffs */
 171:Src/main.c    ****     ssd1306_Init();
 172:Src/main.c    ****     print("Starting", 0);
 173:Src/main.c    ****     claw_init(&htim3);
 174:Src/main.c    ****     ///basket_init(&htim3);
 175:Src/main.c    **** 
 176:Src/main.c    ****     uint8_t ewok_cnt = 0;
 177:Src/main.c    ****     PID_t enc_pid = pid_Init(1, 0, 0, 1, 1);
 178:Src/main.c    **** 
 179:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_1, LEFT_SPEED);
 180:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, RIGHT_SPEED);
 181:Src/main.c    ****     uint32_t temp_time = HAL_GetTick();
 182:Src/main.c    ****     while ((HAL_GetTick() - temp_time) < 4000)
 183:Src/main.c    ****     {
 184:Src/main.c    ****         drive_straight(&enc_pid);
 185:Src/main.c    ****     }
 186:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_1, 0);
 187:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, 0);
 188:Src/main.c    **** 
 189:Src/main.c    ****     /* Initially disabled interrupts */
 190:Src/main.c    ****     HAL_NVIC_EnableIRQ(PI_INT_EXTI_IRQn);
 191:Src/main.c    ****     /* USER CODE END 2 */
 192:Src/main.c    **** 
 193:Src/main.c    ****     /* Infinite loop */
 194:Src/main.c    ****     /* USER CODE BEGIN WHILE */
 195:Src/main.c    ****     while (1)
 196:Src/main.c    ****     {
 197:Src/main.c    ****         /*
 198:Src/main.c    ****          * Pi Turning
 199:Src/main.c    ****          */
 200:Src/main.c    ****         if (PI_INT_STATE == FLAGGED)
 201:Src/main.c    ****         {
 202:Src/main.c    ****             print("in pi int", 0);
 203:Src/main.c    ****             turn();
 204:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_1, LEFT_SPEED);
 205:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_3, RIGHT_SPEED);
 206:Src/main.c    ****             uint32_t start = HAL_GetTick();
 207:Src/main.c    ****             HAL_NVIC_EnableIRQ(CLAW_INT_EXTI_IRQn);
 208:Src/main.c    ****             while ((HAL_GetTick() - start) < 4000)
 209:Src/main.c    ****             {
 210:Src/main.c    ****                 drive_straight(&enc_pid);
 211:Src/main.c    ****                 if (CLAW_INT_STATE == FLAGGED)
 212:Src/main.c    ****                 {
 213:Src/main.c    ****                     HAL_Delay(200);
 214:Src/main.c    ****                     set_motor_speed(TIM_CHANNEL_1, 0);
 215:Src/main.c    ****                     set_motor_speed(TIM_CHANNEL_3, 0);
 216:Src/main.c    ****                     close_claw(&htim3);
 217:Src/main.c    ****                     arm_up(&htim3);
 218:Src/main.c    ****                     HAL_NVIC_DisableIRQ(CLAW_INT_EXTI_IRQn);
 219:Src/main.c    ****                     CLAW_INT_STATE = NOT_FLAGGED;
 220:Src/main.c    ****                     ++ewok_cnt;
 221:Src/main.c    ****                     char msg[18] = "";
 222:Src/main.c    ****                     sprintf(msg, "wok_cnt: %d", ewok_cnt);
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 6


 223:Src/main.c    ****                     print(msg, 0);
 224:Src/main.c    ****                     if (ewok_cnt == 1)
 225:Src/main.c    ****                     {
 226:Src/main.c    ****                         turn_deg(-120);
 227:Src/main.c    ****                         open_claw(&htim3);
 228:Src/main.c    ****                         square_edge(&enc_pid);
 229:Src/main.c    ****                         start = HAL_GetTick();
 230:Src/main.c    ****                         while ((HAL_GetTick() - start) < 2000)
 231:Src/main.c    ****                         {
 232:Src/main.c    ****                             drive_straight(&enc_pid);
 233:Src/main.c    ****                         }
 234:Src/main.c    ****                         arm_down(&htim3);
 235:Src/main.c    ****                     }
 236:Src/main.c    ****                     break;
 237:Src/main.c    ****                 }
 238:Src/main.c    ****             }
 239:Src/main.c    ****             // char pic_plz = "1";
 240:Src/main.c    ****             // HAL_UART_Transmit(&huart2, pic_plz, sizeof(pic_plz), 10000);
 241:Src/main.c    ****             PI_INT_STATE = NOT_FLAGGED;
 242:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_1, 0);
 243:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_3, 0);
 244:Src/main.c    ****         }
 245:Src/main.c    ****         else
 246:Src/main.c    ****         {
 247:Src/main.c    ****             /*
 248:Src/main.c    ****          * Look for Ewok
 249:Src/main.c    ****          */
 250:Src/main.c    ****             temp_time = HAL_GetTick();
 251:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_1, LEFT_SPEED);
 252:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_3, RIGHT_SPEED);
 253:Src/main.c    ****             while ((HAL_GetTick() - temp_time) < 200)
 254:Src/main.c    ****             {
 255:Src/main.c    ****                 drive_straight(&enc_pid);
 256:Src/main.c    ****             }
 257:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_1, 0);
 258:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_3, 0);
 259:Src/main.c    ****         }
 260:Src/main.c    **** 
 261:Src/main.c    ****         /*
 262:Src/main.c    ****          * IR DETECTION
 263:Src/main.c    ****          *
 264:Src/main.c    ****          if (IR_INT_STATE == FLAGGED)
 265:Src/main.c    ****          {
 266:Src/main.c    ****          alarm_detect();
 267:Src/main.c    ****         //drive past sensor, enough so as to not trigger interrupt again
 268:Src/main.c    ****         HAL_Delay(2000);
 269:Src/main.c    ****         }*/
 270:Src/main.c    **** 
 271:Src/main.c    ****     //     /* USER CODE END WHILE */
 272:Src/main.c    **** 
 273:Src/main.c    ****     //     /* USER CODE BEGIN 3 */
 274:Src/main.c    ****     }
 275:Src/main.c    ****     /* USER CODE END 3 */
 276:Src/main.c    **** }
 277:Src/main.c    **** 
 278:Src/main.c    **** /**
 279:Src/main.c    ****  * @brief System Clock Configuration
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 7


 280:Src/main.c    ****  * @retval None
 281:Src/main.c    ****  */
 282:Src/main.c    **** void SystemClock_Config(void)
 283:Src/main.c    **** {
 284:Src/main.c    **** 
 285:Src/main.c    ****     RCC_OscInitTypeDef RCC_OscInitStruct;
 286:Src/main.c    ****     RCC_ClkInitTypeDef RCC_ClkInitStruct;
 287:Src/main.c    **** 
 288:Src/main.c    ****     /**Configure the main internal regulator output voltage 
 289:Src/main.c    ****     */
 290:Src/main.c    ****     __HAL_RCC_PWR_CLK_ENABLE();
 291:Src/main.c    **** 
 292:Src/main.c    ****     __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE2);
 293:Src/main.c    **** 
 294:Src/main.c    ****     /**Initializes the CPU, AHB and APB busses clocks 
 295:Src/main.c    ****     */
 296:Src/main.c    ****     RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
 297:Src/main.c    ****     RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 298:Src/main.c    ****     RCC_OscInitStruct.HSICalibrationValue = 16;
 299:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 300:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
 301:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLM = 8;
 302:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLN = 72;
 303:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
 304:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLQ = 4;
 305:Src/main.c    ****     if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 306:Src/main.c    ****     {
 307:Src/main.c    ****         _Error_Handler(__FILE__, __LINE__);
 308:Src/main.c    ****     }
 309:Src/main.c    **** 
 310:Src/main.c    ****     /**Initializes the CPU, AHB and APB busses clocks 
 311:Src/main.c    ****     */
 312:Src/main.c    ****     RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK | RCC_CLOCKTYPE_SYSCLK | RCC_CLOCKTYPE_PCLK1 |
 313:Src/main.c    ****     RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 314:Src/main.c    ****     RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 315:Src/main.c    ****     RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;
 316:Src/main.c    ****     RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 317:Src/main.c    **** 
 318:Src/main.c    ****     if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)
 319:Src/main.c    ****     {
 320:Src/main.c    ****         _Error_Handler(__FILE__, __LINE__);
 321:Src/main.c    ****     }
 322:Src/main.c    **** 
 323:Src/main.c    ****     /**Configure the Systick interrupt time 
 324:Src/main.c    ****     */
 325:Src/main.c    ****     HAL_SYSTICK_Config(HAL_RCC_GetHCLKFreq() / 1000);
 326:Src/main.c    **** 
 327:Src/main.c    ****     /**Configure the Systick 
 328:Src/main.c    ****     */
 329:Src/main.c    ****     HAL_SYSTICK_CLKSourceConfig(SYSTICK_CLKSOURCE_HCLK);
 330:Src/main.c    **** 
 331:Src/main.c    ****     /* SysTick_IRQn interrupt configuration */
 332:Src/main.c    ****     HAL_NVIC_SetPriority(SysTick_IRQn, 0, 0);
 333:Src/main.c    **** }
 334:Src/main.c    **** 
 335:Src/main.c    **** /* USER CODE BEGIN 4 */
 336:Src/main.c    **** 
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 8


 337:Src/main.c    **** void square_edge(PID_t *enc_pid)
 338:Src/main.c    **** {
 339:Src/main.c    ****     while (1)
 340:Src/main.c    ****     {
 341:Src/main.c    ****         drive_straight(enc_pid);
 342:Src/main.c    ****         if (EDGE_LEFT_STATE == FLAGGED || EDGE_RIGHT_STATE == FLAGGED)
 343:Src/main.c    ****         {
 344:Src/main.c    ****             if (EDGE_LEFT_STATE == FLAGGED)
 345:Src/main.c    ****             {
 346:Src/main.c    ****                 set_motor_speed(TIM_CHANNEL_1, 0);
 347:Src/main.c    ****             }
 348:Src/main.c    ****             if (EDGE_RIGHT_STATE == FLAGGED)
 349:Src/main.c    ****             {
 350:Src/main.c    ****                 set_motor_speed(TIM_CHANNEL_3, 0);
 351:Src/main.c    ****             }
 352:Src/main.c    ****         }
 353:Src/main.c    ****         else if (EDGE_LEFT_STATE == FLAGGED && EDGE_RIGHT_STATE == FLAGGED)
 354:Src/main.c    ****         {
 355:Src/main.c    ****             break;
 356:Src/main.c    ****         }
 357:Src/main.c    ****     }
 358:Src/main.c    **** }
 359:Src/main.c    **** 
 360:Src/main.c    **** void drive_straight(PID_t *enc_pid)
 361:Src/main.c    **** {
 362:Src/main.c    ****     encoder_pid(enc_pid);
 363:Src/main.c    ****     HAL_Delay(10);
 364:Src/main.c    **** }
 365:Src/main.c    **** 
 366:Src/main.c    **** /*
 367:Src/main.c    ****  * Assume motors are not on.
 368:Src/main.c    ****  * Reads adc, turns left or right based on voltage. Left max= 0 , no turn = 1.65 V, right max = 3.3
 369:Src/main.c    ****  */
 370:Src/main.c    **** void turn()
 371:Src/main.c    **** {
 372:Src/main.c    ****     HAL_ADC_Start_DMA(&hadc1, dma_buffer, sizeof(dma_buffer) / sizeof(dma_buffer[0]));
 373:Src/main.c    ****     //TODO calculate time needed to fill first buffer
 374:Src/main.c    ****     HAL_Delay(50);
 375:Src/main.c    ****     float volts = calculate_heading(adc_values[5]);
 376:Src/main.c    ****     uint16_t counts = TURN_CONST * fabs(volts);
 377:Src/main.c    ****     TIM4->CNT = 0;
 378:Src/main.c    ****     TIM5->CNT = 0;
 379:Src/main.c    **** 
 380:Src/main.c    ****     char msg[18] = "";
 381:Src/main.c    ****     sprintf(msg, "cnts: %d", counts);
 382:Src/main.c    ****     print(msg, 0);
 383:Src/main.c    ****     int pre_dec = (int)(volts / 1);
 384:Src/main.c    ****     int post_dec = (int)((volts - pre_dec) * 1000);
 385:Src/main.c    ****     sprintf(msg, "vlts: %d.%d", pre_dec, post_dec);
 386:Src/main.c    ****     print(msg, 2);
 387:Src/main.c    **** 
 388:Src/main.c    ****     if (volts < -TURN_TOLERANCE) // FIXME: Ben changed this
 389:Src/main.c    ****     {
 390:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_1, 0);
 391:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_3, RIGHT_SPEED);
 392:Src/main.c    ****         while (TIM5->CNT < counts)
 393:Src/main.c    ****         {
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 9


 394:Src/main.c    ****             sprintf(msg, "TIM5->CNT: %lu", TIM5->CNT);
 395:Src/main.c    ****             print(msg, 4);
 396:Src/main.c    ****         }
 397:Src/main.c    ****         sprintf(msg, "TIM5->CNT: %lu", TIM5->CNT);
 398:Src/main.c    ****         print(msg, 4);
 399:Src/main.c    ****         TIM5->CNT = 0;
 400:Src/main.c    ****     }
 401:Src/main.c    ****     else if (volts > TURN_TOLERANCE) // FIXME: Ben changed this
 402:Src/main.c    ****     {
 403:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_1, LEFT_SPEED);
 404:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_3, 0);
 405:Src/main.c    ****         while (TIM4->CNT < counts)
 406:Src/main.c    ****         {
 407:Src/main.c    ****             sprintf(msg, "TIM4->CNT: %lu", TIM4->CNT);
 408:Src/main.c    ****             print(msg, 4);
 409:Src/main.c    ****         }
 410:Src/main.c    ****         sprintf(msg, "TIM4->CNT: %lu", TIM4->CNT);
 411:Src/main.c    ****         print(msg, 4);
 412:Src/main.c    ****         TIM4->CNT = 0;
 413:Src/main.c    ****     }
 414:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_1, 0);
 415:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, 0);
 416:Src/main.c    ****     HAL_ADC_Stop_DMA(&hadc1);
 417:Src/main.c    **** }
 418:Src/main.c    **** 
 419:Src/main.c    **** /*
 420:Src/main.c    ****  * Assume motors are not on.
 421:Src/main.c    ****  * Reads adc, turns left or right based on voltage. Left max= 0 , no turn = 1.65 V, right max = 3.3
 422:Src/main.c    ****  */
 423:Src/main.c    **** void turn_deg(uint8_t deg)
 424:Src/main.c    **** {
 425:Src/main.c    ****     HAL_ADC_Start_DMA(&hadc1, dma_buffer, sizeof(dma_buffer) / sizeof(dma_buffer[0]));
 426:Src/main.c    ****     uint16_t counts = 50.0 / 90.0 * (deg - 90) + 50;
 427:Src/main.c    ****     TIM4->CNT = 0;
 428:Src/main.c    ****     TIM5->CNT = 0;
 429:Src/main.c    **** 
 430:Src/main.c    ****     char msg[18] = "";
 431:Src/main.c    **** 
 432:Src/main.c    ****     if (deg > 0) // FIXME: Ben changed this
 433:Src/main.c    ****     {
 434:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_1, 0);
 435:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_3, 30000);
 436:Src/main.c    ****         while (TIM5->CNT < counts)
 437:Src/main.c    ****         {
 438:Src/main.c    ****             sprintf(msg, "TIM5->CNT: %lu", TIM5->CNT);
 439:Src/main.c    ****             print(msg, 4);
 440:Src/main.c    ****         }
 441:Src/main.c    ****         sprintf(msg, "TIM5->CNT: %lu", TIM5->CNT);
 442:Src/main.c    ****         print(msg, 4);
 443:Src/main.c    ****         TIM5->CNT = 0;
 444:Src/main.c    ****     }
 445:Src/main.c    ****     else if (deg < 0) // FIXME: Ben changed this
 446:Src/main.c    ****     {
 447:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_1, 30000);
 448:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_3, 0);
 449:Src/main.c    ****         while (TIM4->CNT < counts)
 450:Src/main.c    ****         {
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 10


 451:Src/main.c    ****             sprintf(msg, "TIM4->CNT: %lu", TIM4->CNT);
 452:Src/main.c    ****             print(msg, 4);
 453:Src/main.c    ****         }
 454:Src/main.c    ****         sprintf(msg, "TIM4->CNT: %lu", TIM4->CNT);
 455:Src/main.c    ****         print(msg, 4);
 456:Src/main.c    ****         TIM4->CNT = 0;
 457:Src/main.c    ****     }
 458:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_1, 0);
 459:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, 0);
 460:Src/main.c    ****     HAL_ADC_Stop_DMA(&hadc1);
 461:Src/main.c    **** }
 462:Src/main.c    **** 
 463:Src/main.c    **** /**
 464:Src/main.c    ****  * Resistor ladder: 8-bit, 0->3.3v.
 465:Src/main.c    ****  * ADC: 12-bit, 0->3.3V
 466:Src/main.c    ****  *
 467:Src/main.c    ****  * @param adc_val, value read from ADC.
 468:Src/main.c    ****  * @return heading as a percentage from -50 (left) to 50 (right).
 469:Src/main.c    ****  **/
 470:Src/main.c    **** float calculate_heading(uint32_t adc_val)
 471:Src/main.c    **** {
  67              		.loc 1 471 0
  68              		.cfi_startproc
  69              		@ args = 0, pretend = 0, frame = 0
  70              		@ frame_needed = 0, uses_anonymous_args = 0
  71              	.LVL3:
  72 0000 08B5     		push	{r3, lr}
  73              	.LCFI1:
  74              		.cfi_def_cfa_offset 8
  75              		.cfi_offset 3, -8
  76              		.cfi_offset 14, -4
 472:Src/main.c    ****     return adc_val / 4096.0 - 0.5;
  77              		.loc 1 472 0
  78 0002 FFF7FEFF 		bl	__aeabi_ui2d
  79              	.LVL4:
  80 0006 0022     		movs	r2, #0
  81 0008 054B     		ldr	r3, .L7
  82 000a FFF7FEFF 		bl	__aeabi_dmul
  83              	.LVL5:
  84 000e 0022     		movs	r2, #0
  85 0010 044B     		ldr	r3, .L7+4
  86 0012 FFF7FEFF 		bl	__aeabi_dsub
  87              	.LVL6:
  88 0016 FFF7FEFF 		bl	__aeabi_d2f
  89              	.LVL7:
 473:Src/main.c    **** }
  90              		.loc 1 473 0
  91 001a 00EE100A 		fmsr	s0, r0
  92 001e 08BD     		pop	{r3, pc}
  93              	.L8:
  94              		.align	2
  95              	.L7:
  96 0020 0000303F 		.word	1060110336
  97 0024 0000E03F 		.word	1071644672
  98              		.cfi_endproc
  99              	.LFE130:
 101              		.global	__aeabi_dcmplt
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 11


 102              		.global	__aeabi_dcmpgt
 103              		.section	.text.alarm_detect,"ax",%progbits
 104              		.align	2
 105              		.global	alarm_detect
 106              		.thumb
 107              		.thumb_func
 109              	alarm_detect:
 110              	.LFB131:
 474:Src/main.c    **** 
 475:Src/main.c    **** // Sampling frequency: 72e6/2/(495*3)
 476:Src/main.c    **** void alarm_detect()
 477:Src/main.c    **** {
 111              		.loc 1 477 0
 112              		.cfi_startproc
 113              		@ args = 0, pretend = 0, frame = 0
 114              		@ frame_needed = 0, uses_anonymous_args = 0
 115 0000 00B5     		push	{lr}
 116              	.LCFI2:
 117              		.cfi_def_cfa_offset 4
 118              		.cfi_offset 14, -4
 119 0002 83B0     		sub	sp, sp, #12
 120              	.LCFI3:
 121              		.cfi_def_cfa_offset 16
 478:Src/main.c    ****     HAL_ADC_Start_DMA(&hadc1, dma_buffer, sizeof(dma_buffer) / sizeof(dma_buffer[0]));
 122              		.loc 1 478 0
 123 0004 1C48     		ldr	r0, .L13
 124 0006 1D49     		ldr	r1, .L13+4
 125 0008 4FF40062 		mov	r2, #2048
 126 000c FFF7FEFF 		bl	HAL_ADC_Start_DMA
 127              	.LVL8:
 479:Src/main.c    ****     //TODO calculate time needed to fill first buffer
 480:Src/main.c    ****     HAL_Delay(500);
 128              		.loc 1 480 0
 129 0010 4FF4FA70 		mov	r0, #500
 130 0014 FFF7FEFF 		bl	HAL_Delay
 131              	.LVL9:
 132              	.L10:
 481:Src/main.c    ****     while (goertzel(adc_values, 24242, 1000, sizeof(dma_buffer) / sizeof(dma_buffer[0]), 0) < 100)
 133              		.loc 1 481 0 discriminator 1
 134 0018 0023     		movs	r3, #0
 135 001a 0093     		str	r3, [sp]
 136 001c 1848     		ldr	r0, .L13+8
 137 001e 45F6B261 		movw	r1, #24242
 138 0022 4FF47A72 		mov	r2, #1000
 139 0026 4FF40063 		mov	r3, #2048
 140 002a FFF7FEFF 		bl	goertzel
 141              	.LVL10:
 142 002e 51EC100B 		fmrrd	r0, r1, d0
 143 0032 0022     		movs	r2, #0
 144 0034 134B     		ldr	r3, .L13+12
 145 0036 FFF7FEFF 		bl	__aeabi_dcmplt
 146              	.LVL11:
 147 003a 0028     		cmp	r0, #0
 148 003c ECD1     		bne	.L10
 149              	.L11:
 482:Src/main.c    ****         ;
 483:Src/main.c    ****     while (goertzel(adc_values, 24242, 1000, sizeof(dma_buffer) / sizeof(dma_buffer[0]), 0) > 100)
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 12


 150              		.loc 1 483 0 discriminator 1
 151 003e 0023     		movs	r3, #0
 152 0040 0093     		str	r3, [sp]
 153 0042 0F48     		ldr	r0, .L13+8
 154 0044 45F6B261 		movw	r1, #24242
 155 0048 4FF47A72 		mov	r2, #1000
 156 004c 4FF40063 		mov	r3, #2048
 157 0050 FFF7FEFF 		bl	goertzel
 158              	.LVL12:
 159 0054 51EC100B 		fmrrd	r0, r1, d0
 160 0058 0022     		movs	r2, #0
 161 005a 0A4B     		ldr	r3, .L13+12
 162 005c FFF7FEFF 		bl	__aeabi_dcmpgt
 163              	.LVL13:
 164 0060 0028     		cmp	r0, #0
 165 0062 ECD1     		bne	.L11
 484:Src/main.c    ****         ;
 485:Src/main.c    ****     HAL_ADC_Stop_DMA(&hadc1);
 166              		.loc 1 485 0
 167 0064 0448     		ldr	r0, .L13
 168 0066 FFF7FEFF 		bl	HAL_ADC_Stop_DMA
 169              	.LVL14:
 486:Src/main.c    ****     IR_INT_STATE = NOT_FLAGGED;
 170              		.loc 1 486 0
 171 006a 0022     		movs	r2, #0
 172 006c 064B     		ldr	r3, .L13+16
 173 006e 1A70     		strb	r2, [r3]
 487:Src/main.c    **** }
 174              		.loc 1 487 0
 175 0070 03B0     		add	sp, sp, #12
 176              	.LCFI4:
 177              		.cfi_def_cfa_offset 4
 178              		@ sp needed
 179 0072 5DF804FB 		ldr	pc, [sp], #4
 180              	.L14:
 181 0076 00BF     		.align	2
 182              	.L13:
 183 0078 00000000 		.word	hadc1
 184 007c 00000000 		.word	dma_buffer
 185 0080 00000000 		.word	adc_values
 186 0084 00005940 		.word	1079574528
 187 0088 00000000 		.word	IR_INT_STATE
 188              		.cfi_endproc
 189              	.LFE131:
 191              		.section	.text.print,"ax",%progbits
 192              		.align	2
 193              		.global	print
 194              		.thumb
 195              		.thumb_func
 197              	print:
 198              	.LFB132:
 488:Src/main.c    **** 
 489:Src/main.c    **** /**
 490:Src/main.c    ****  * @brief prints string to row, rows from 0 - 6, resets screen when printing from row 0
 491:Src/main.c    ****  * @param msg, string to print
 492:Src/main.c    ****  * @param row, row to print msg to
 493:Src/main.c    ****  */
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 13


 494:Src/main.c    **** void print(char *msg, int row)
 495:Src/main.c    **** {
 199              		.loc 1 495 0
 200              		.cfi_startproc
 201              		@ args = 0, pretend = 0, frame = 0
 202              		@ frame_needed = 0, uses_anonymous_args = 0
 203              	.LVL15:
 204 0000 38B5     		push	{r3, r4, r5, lr}
 205              	.LCFI5:
 206              		.cfi_def_cfa_offset 16
 207              		.cfi_offset 3, -16
 208              		.cfi_offset 4, -12
 209              		.cfi_offset 5, -8
 210              		.cfi_offset 14, -4
 211 0002 0546     		mov	r5, r0
 496:Src/main.c    ****     if (row == 0)
 212              		.loc 1 496 0
 213 0004 0C46     		mov	r4, r1
 214 0006 11B9     		cbnz	r1, .L16
 497:Src/main.c    ****     {
 498:Src/main.c    ****         ssd1306_Fill(Black);
 215              		.loc 1 498 0
 216 0008 0020     		movs	r0, #0
 217              	.LVL16:
 218 000a FFF7FEFF 		bl	ssd1306_Fill
 219              	.LVL17:
 220              	.L16:
 499:Src/main.c    ****     }
 500:Src/main.c    ****     ssd1306_SetCursor(0, row * 10);
 221              		.loc 1 500 0
 222 000e 04EB8404 		add	r4, r4, r4, lsl #2
 223              	.LVL18:
 224 0012 6100     		lsls	r1, r4, #1
 225 0014 0020     		movs	r0, #0
 226 0016 01F0FE01 		and	r1, r1, #254
 227 001a FFF7FEFF 		bl	ssd1306_SetCursor
 228              	.LVL19:
 501:Src/main.c    ****     ssd1306_WriteString(msg, Font_7x10, White);
 229              		.loc 1 501 0
 230 001e 054B     		ldr	r3, .L18
 231 0020 2846     		mov	r0, r5
 232 0022 93E80600 		ldmia	r3, {r1, r2}
 233 0026 0123     		movs	r3, #1
 234 0028 FFF7FEFF 		bl	ssd1306_WriteString
 235              	.LVL20:
 502:Src/main.c    ****     ssd1306_UpdateScreen();
 236              		.loc 1 502 0
 237 002c FFF7FEFF 		bl	ssd1306_UpdateScreen
 238              	.LVL21:
 239 0030 38BD     		pop	{r3, r4, r5, pc}
 240              	.LVL22:
 241              	.L19:
 242 0032 00BF     		.align	2
 243              	.L18:
 244 0034 00000000 		.word	Font_7x10
 245              		.cfi_endproc
 246              	.LFE132:
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 14


 248              		.section	.text.menu,"ax",%progbits
 249              		.align	2
 250              		.global	menu
 251              		.thumb
 252              		.thumb_func
 254              	menu:
 255              	.LFB133:
 503:Src/main.c    **** }
 504:Src/main.c    **** 
 505:Src/main.c    **** PID_t menu()
 506:Src/main.c    **** {
 256              		.loc 1 506 0
 257              		.cfi_startproc
 258              		@ args = 0, pretend = 0, frame = 32
 259              		@ frame_needed = 0, uses_anonymous_args = 0
 260              	.LVL23:
 261 0000 30B5     		push	{r4, r5, lr}
 262              	.LCFI6:
 263              		.cfi_def_cfa_offset 12
 264              		.cfi_offset 4, -12
 265              		.cfi_offset 5, -8
 266              		.cfi_offset 14, -4
 267 0002 8BB0     		sub	sp, sp, #44
 268              	.LCFI7:
 269              		.cfi_def_cfa_offset 56
 270 0004 0546     		mov	r5, r0
 507:Src/main.c    ****     print("Starting", 0);
 271              		.loc 1 507 0
 272 0006 2548     		ldr	r0, .L26
 273              	.LVL24:
 274 0008 0021     		movs	r1, #0
 275 000a FFF7FEFF 		bl	print
 276              	.LVL25:
 508:Src/main.c    ****     char msg[20] = "";
 277              		.loc 1 508 0
 278 000e 0024     		movs	r4, #0
 279 0010 0594     		str	r4, [sp, #20]
 280 0012 0694     		str	r4, [sp, #24]
 281 0014 0794     		str	r4, [sp, #28]
 282 0016 0894     		str	r4, [sp, #32]
 283 0018 0994     		str	r4, [sp, #36]
 284              	.LVL26:
 509:Src/main.c    ****     int pid_select = 0;
 510:Src/main.c    ****     uint32_t values[2] = {0, 0};
 285              		.loc 1 510 0
 286 001a 0394     		str	r4, [sp, #12]
 287 001c 0494     		str	r4, [sp, #16]
 288              	.LVL27:
 289              	.L24:
 511:Src/main.c    ****     while (1)
 512:Src/main.c    ****     {
 513:Src/main.c    ****         if (HAL_GPIO_ReadPin(MENU_GPIO_Port, MENU_Pin) == 0)
 290              		.loc 1 513 0
 291 001e 2048     		ldr	r0, .L26+4
 292 0020 4FF40051 		mov	r1, #8192
 293 0024 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 294              	.LVL28:
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 15


 295 0028 48BB     		cbnz	r0, .L21
 514:Src/main.c    ****         {
 515:Src/main.c    ****             sprintf(msg, "%lu", values[pid_select]);
 296              		.loc 1 515 0
 297 002a 05A8     		add	r0, sp, #20
 298 002c 1D49     		ldr	r1, .L26+8
 299 002e 0AAB     		add	r3, sp, #40
 300 0030 03EB8403 		add	r3, r3, r4, lsl #2
 301 0034 53F81C2C 		ldr	r2, [r3, #-28]
 302 0038 FFF7FEFF 		bl	sprintf
 303              	.LVL29:
 516:Src/main.c    ****             print(msg, 0);
 304              		.loc 1 516 0
 305 003c 05A8     		add	r0, sp, #20
 306 003e 0021     		movs	r1, #0
 307 0040 FFF7FEFF 		bl	print
 308              	.LVL30:
 517:Src/main.c    ****             while (HAL_GPIO_ReadPin(MENU_GPIO_Port, MENU_Pin) == 0)
 309              		.loc 1 517 0
 310 0044 13E0     		b	.L22
 311              	.L23:
 518:Src/main.c    ****             {
 519:Src/main.c    ****                 values[pid_select]++;
 312              		.loc 1 519 0
 313 0046 0AAB     		add	r3, sp, #40
 314 0048 03EB8403 		add	r3, r3, r4, lsl #2
 315 004c 53F81C2C 		ldr	r2, [r3, #-28]
 316 0050 0132     		adds	r2, r2, #1
 317 0052 43F81C2C 		str	r2, [r3, #-28]
 520:Src/main.c    ****                 sprintf(msg, "%lu", values[pid_select]);
 318              		.loc 1 520 0
 319 0056 05A8     		add	r0, sp, #20
 320 0058 1249     		ldr	r1, .L26+8
 321 005a FFF7FEFF 		bl	sprintf
 322              	.LVL31:
 521:Src/main.c    ****                 print(msg, 0);
 323              		.loc 1 521 0
 324 005e 05A8     		add	r0, sp, #20
 325 0060 0021     		movs	r1, #0
 326 0062 FFF7FEFF 		bl	print
 327              	.LVL32:
 522:Src/main.c    ****                 HAL_Delay(500);
 328              		.loc 1 522 0
 329 0066 4FF4FA70 		mov	r0, #500
 330 006a FFF7FEFF 		bl	HAL_Delay
 331              	.LVL33:
 332              	.L22:
 517:Src/main.c    ****             {
 333              		.loc 1 517 0
 334 006e 0C48     		ldr	r0, .L26+4
 335 0070 4FF40051 		mov	r1, #8192
 336 0074 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 337              	.LVL34:
 338 0078 0028     		cmp	r0, #0
 339 007a E4D0     		beq	.L23
 523:Src/main.c    ****             }
 524:Src/main.c    ****             ++pid_select;
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 16


 340              		.loc 1 524 0
 341 007c 0134     		adds	r4, r4, #1
 342              	.LVL35:
 343              	.L21:
 525:Src/main.c    ****         }
 526:Src/main.c    ****         if (pid_select == 2)
 344              		.loc 1 526 0
 345 007e 022C     		cmp	r4, #2
 346 0080 CDD1     		bne	.L24
 527:Src/main.c    ****             break;
 528:Src/main.c    ****     }
 529:Src/main.c    ****     return pid_Init(values[0], values[1], 1, 1, 1);
 347              		.loc 1 529 0
 348 0082 BDF80C10 		ldrh	r1, [sp, #12]
 349 0086 BDF81020 		ldrh	r2, [sp, #16]
 350 008a 0123     		movs	r3, #1
 351 008c 0093     		str	r3, [sp]
 352 008e 0193     		str	r3, [sp, #4]
 353 0090 2846     		mov	r0, r5
 354 0092 FFF7FEFF 		bl	pid_Init
 355              	.LVL36:
 530:Src/main.c    **** }
 356              		.loc 1 530 0
 357 0096 2846     		mov	r0, r5
 358 0098 0BB0     		add	sp, sp, #44
 359              	.LCFI8:
 360              		.cfi_def_cfa_offset 12
 361              		@ sp needed
 362 009a 30BD     		pop	{r4, r5, pc}
 363              	.LVL37:
 364              	.L27:
 365              		.align	2
 366              	.L26:
 367 009c 00000000 		.word	.LC0
 368 00a0 00080240 		.word	1073874944
 369 00a4 0C000000 		.word	.LC1
 370              		.cfi_endproc
 371              	.LFE133:
 373              		.section	.text.set_motor_speed,"ax",%progbits
 374              		.align	2
 375              		.global	set_motor_speed
 376              		.thumb
 377              		.thumb_func
 379              	set_motor_speed:
 380              	.LFB134:
 531:Src/main.c    **** 
 532:Src/main.c    **** void set_motor_speed(uint32_t channel, uint32_t speed)
 533:Src/main.c    **** {
 381              		.loc 1 533 0
 382              		.cfi_startproc
 383              		@ args = 0, pretend = 0, frame = 0
 384              		@ frame_needed = 0, uses_anonymous_args = 0
 385              		@ link register save eliminated.
 386              	.LVL38:
 534:Src/main.c    ****     if (channel == TIM_CHANNEL_1)
 387              		.loc 1 534 0
 388 0000 0346     		mov	r3, r0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 17


 389 0002 18B9     		cbnz	r0, .L29
 535:Src/main.c    ****     {
 536:Src/main.c    ****         __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, 0);
 390              		.loc 1 536 0
 391 0004 114A     		ldr	r2, .L33
 392 0006 1268     		ldr	r2, [r2]
 393 0008 9063     		str	r0, [r2, #56]
 394 000a 13E0     		b	.L30
 395              	.L29:
 537:Src/main.c    ****     }
 538:Src/main.c    ****     else if (channel == TIM_CHANNEL_2)
 396              		.loc 1 538 0
 397 000c 0428     		cmp	r0, #4
 398 000e 04D1     		bne	.L31
 539:Src/main.c    ****     {
 540:Src/main.c    ****         __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, 0);
 399              		.loc 1 540 0
 400 0010 0E4A     		ldr	r2, .L33
 401 0012 1268     		ldr	r2, [r2]
 402 0014 0020     		movs	r0, #0
 403              	.LVL39:
 404 0016 5063     		str	r0, [r2, #52]
 405 0018 0CE0     		b	.L30
 406              	.LVL40:
 407              	.L31:
 541:Src/main.c    ****     }
 542:Src/main.c    ****     else if (channel == TIM_CHANNEL_3)
 408              		.loc 1 542 0
 409 001a 0828     		cmp	r0, #8
 410 001c 04D1     		bne	.L32
 543:Src/main.c    ****     {
 544:Src/main.c    ****         __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_4, 0);
 411              		.loc 1 544 0
 412 001e 0B4A     		ldr	r2, .L33
 413 0020 1268     		ldr	r2, [r2]
 414 0022 0020     		movs	r0, #0
 415              	.LVL41:
 416 0024 1064     		str	r0, [r2, #64]
 417 0026 05E0     		b	.L30
 418              	.LVL42:
 419              	.L32:
 545:Src/main.c    ****     }
 546:Src/main.c    ****     else if (channel == TIM_CHANNEL_4)
 420              		.loc 1 546 0
 421 0028 0C28     		cmp	r0, #12
 422 002a 03D1     		bne	.L30
 547:Src/main.c    ****     {
 548:Src/main.c    ****         __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, 0);
 423              		.loc 1 548 0
 424 002c 074A     		ldr	r2, .L33
 425 002e 1268     		ldr	r2, [r2]
 426 0030 0020     		movs	r0, #0
 427              	.LVL43:
 428 0032 D063     		str	r0, [r2, #60]
 429              	.L30:
 549:Src/main.c    ****     }
 550:Src/main.c    ****     __HAL_TIM_SET_COMPARE(&htim1, channel, speed > 1000 ? 1000 : speed);
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 18


 430              		.loc 1 550 0
 431 0034 054A     		ldr	r2, .L33
 432 0036 1268     		ldr	r2, [r2]
 433 0038 3432     		adds	r2, r2, #52
 434 003a 9B08     		lsrs	r3, r3, #2
 435              	.LVL44:
 436 003c B1F57A7F 		cmp	r1, #1000
 437 0040 28BF     		it	cs
 438 0042 4FF47A71 		movcs	r1, #1000
 439              	.LVL45:
 440 0046 42F82310 		str	r1, [r2, r3, lsl #2]
 441 004a 7047     		bx	lr
 442              	.L34:
 443              		.align	2
 444              	.L33:
 445 004c 00000000 		.word	htim1
 446              		.cfi_endproc
 447              	.LFE134:
 449              		.global	__aeabi_f2d
 450              		.global	__aeabi_d2uiz
 451              		.section	.text.turn,"ax",%progbits
 452              		.align	2
 453              		.global	turn
 454              		.thumb
 455              		.thumb_func
 457              	turn:
 458              	.LFB128:
 371:Src/main.c    ****     HAL_ADC_Start_DMA(&hadc1, dma_buffer, sizeof(dma_buffer) / sizeof(dma_buffer[0]));
 459              		.loc 1 371 0
 460              		.cfi_startproc
 461              		@ args = 0, pretend = 0, frame = 24
 462              		@ frame_needed = 0, uses_anonymous_args = 0
 463 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 464              	.LCFI9:
 465              		.cfi_def_cfa_offset 20
 466              		.cfi_offset 4, -20
 467              		.cfi_offset 5, -16
 468              		.cfi_offset 6, -12
 469              		.cfi_offset 7, -8
 470              		.cfi_offset 14, -4
 471 0002 2DED028B 		fstmfdd	sp!, {d8}
 472              	.LCFI10:
 473              		.cfi_def_cfa_offset 28
 474              		.cfi_offset 80, -28
 475              		.cfi_offset 81, -24
 476 0006 87B0     		sub	sp, sp, #28
 477              	.LCFI11:
 478              		.cfi_def_cfa_offset 56
 372:Src/main.c    ****     //TODO calculate time needed to fill first buffer
 479              		.loc 1 372 0
 480 0008 5F48     		ldr	r0, .L48+16
 481 000a 6049     		ldr	r1, .L48+20
 482 000c 4FF40062 		mov	r2, #2048
 483 0010 FFF7FEFF 		bl	HAL_ADC_Start_DMA
 484              	.LVL46:
 374:Src/main.c    ****     float volts = calculate_heading(adc_values[5]);
 485              		.loc 1 374 0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 19


 486 0014 3220     		movs	r0, #50
 487 0016 FFF7FEFF 		bl	HAL_Delay
 488              	.LVL47:
 375:Src/main.c    ****     uint16_t counts = TURN_CONST * fabs(volts);
 489              		.loc 1 375 0
 490 001a 5D4B     		ldr	r3, .L48+24
 491 001c 5869     		ldr	r0, [r3, #20]
 492 001e FFF7FEFF 		bl	calculate_heading
 493              	.LVL48:
 494 0022 B0EE408A 		fcpys	s16, s0
 495              	.LVL49:
 376:Src/main.c    ****     TIM4->CNT = 0;
 496              		.loc 1 376 0
 497 0026 F0EEC07A 		fabss	s15, s0
 498 002a 17EE900A 		fmrs	r0, s15
 499 002e FFF7FEFF 		bl	__aeabi_f2d
 500              	.LVL50:
 501 0032 0022     		movs	r2, #0
 502 0034 574B     		ldr	r3, .L48+28
 503 0036 FFF7FEFF 		bl	__aeabi_dmul
 504              	.LVL51:
 505 003a FFF7FEFF 		bl	__aeabi_d2uiz
 506              	.LVL52:
 507 003e 85B2     		uxth	r5, r0
 508              	.LVL53:
 377:Src/main.c    ****     TIM5->CNT = 0;
 509              		.loc 1 377 0
 510 0040 0024     		movs	r4, #0
 511 0042 554B     		ldr	r3, .L48+32
 512 0044 5C62     		str	r4, [r3, #36]
 378:Src/main.c    **** 
 513              		.loc 1 378 0
 514 0046 03F58063 		add	r3, r3, #1024
 515 004a 5C62     		str	r4, [r3, #36]
 380:Src/main.c    ****     sprintf(msg, "cnts: %d", counts);
 516              		.loc 1 380 0
 517 004c 0194     		str	r4, [sp, #4]
 518 004e 0294     		str	r4, [sp, #8]
 519 0050 0394     		str	r4, [sp, #12]
 520 0052 0494     		str	r4, [sp, #16]
 521 0054 ADF81440 		strh	r4, [sp, #20]	@ movhi
 381:Src/main.c    ****     print(msg, 0);
 522              		.loc 1 381 0
 523 0058 01A8     		add	r0, sp, #4
 524 005a 5049     		ldr	r1, .L48+36
 525 005c 2A46     		mov	r2, r5
 526 005e FFF7FEFF 		bl	sprintf
 527              	.LVL54:
 382:Src/main.c    ****     int pre_dec = (int)(volts / 1);
 528              		.loc 1 382 0
 529 0062 01A8     		add	r0, sp, #4
 530 0064 2146     		mov	r1, r4
 531 0066 FFF7FEFF 		bl	print
 532              	.LVL55:
 383:Src/main.c    ****     int post_dec = (int)((volts - pre_dec) * 1000);
 533              		.loc 1 383 0
 534 006a BDEEC87A 		ftosizs	s14, s16
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 20


 535              	.LVL56:
 384:Src/main.c    ****     sprintf(msg, "vlts: %d.%d", pre_dec, post_dec);
 536              		.loc 1 384 0
 537 006e F8EEC77A 		fsitos	s15, s14
 538 0072 78EE677A 		fsubs	s15, s16, s15
 539 0076 DFED4A6A 		flds	s13, .L48+40
 540 007a 67EEA67A 		fmuls	s15, s15, s13
 541              	.LVL57:
 385:Src/main.c    ****     print(msg, 2);
 542              		.loc 1 385 0
 543 007e 01A8     		add	r0, sp, #4
 544 0080 4849     		ldr	r1, .L48+44
 545 0082 17EE102A 		fmrs	r2, s14	@ int
 546 0086 FDEEE77A 		ftosizs	s15, s15
 547              	.LVL58:
 548 008a 17EE903A 		fmrs	r3, s15	@ int
 549 008e FFF7FEFF 		bl	sprintf
 550              	.LVL59:
 386:Src/main.c    **** 
 551              		.loc 1 386 0
 552 0092 01A8     		add	r0, sp, #4
 553 0094 0221     		movs	r1, #2
 554 0096 FFF7FEFF 		bl	print
 555              	.LVL60:
 388:Src/main.c    ****     {
 556              		.loc 1 388 0
 557 009a 18EE100A 		fmrs	r0, s16
 558 009e FFF7FEFF 		bl	__aeabi_f2d
 559              	.LVL61:
 560 00a2 0646     		mov	r6, r0
 561 00a4 0F46     		mov	r7, r1
 562 00a6 34A3     		adr	r3, .L48
 563 00a8 D3E90023 		ldrd	r2, [r3]
 564 00ac FFF7FEFF 		bl	__aeabi_dcmplt
 565              	.LVL62:
 566 00b0 20B3     		cbz	r0, .L46
 390:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_3, RIGHT_SPEED);
 567              		.loc 1 390 0
 568 00b2 2046     		mov	r0, r4
 569 00b4 2146     		mov	r1, r4
 570 00b6 FFF7FEFF 		bl	set_motor_speed
 571              	.LVL63:
 391:Src/main.c    ****         while (TIM5->CNT < counts)
 572              		.loc 1 391 0
 573 00ba 0820     		movs	r0, #8
 574 00bc 3A4B     		ldr	r3, .L48+48
 575 00be 1988     		ldrh	r1, [r3]
 576 00c0 FFF7FEFF 		bl	set_motor_speed
 577              	.LVL64:
 392:Src/main.c    ****         {
 578              		.loc 1 392 0
 579 00c4 09E0     		b	.L38
 580              	.L39:
 394:Src/main.c    ****             print(msg, 4);
 581              		.loc 1 394 0
 582 00c6 394B     		ldr	r3, .L48+52
 583 00c8 5A6A     		ldr	r2, [r3, #36]
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 21


 584 00ca 01A8     		add	r0, sp, #4
 585 00cc 3849     		ldr	r1, .L48+56
 586 00ce FFF7FEFF 		bl	sprintf
 587              	.LVL65:
 395:Src/main.c    ****         }
 588              		.loc 1 395 0
 589 00d2 01A8     		add	r0, sp, #4
 590 00d4 0421     		movs	r1, #4
 591 00d6 FFF7FEFF 		bl	print
 592              	.LVL66:
 593              	.L38:
 392:Src/main.c    ****         {
 594              		.loc 1 392 0
 595 00da 344B     		ldr	r3, .L48+52
 596 00dc 5B6A     		ldr	r3, [r3, #36]
 597 00de AB42     		cmp	r3, r5
 598 00e0 F1D3     		bcc	.L39
 397:Src/main.c    ****         print(msg, 4);
 599              		.loc 1 397 0
 600 00e2 324C     		ldr	r4, .L48+52
 601 00e4 626A     		ldr	r2, [r4, #36]
 602 00e6 01A8     		add	r0, sp, #4
 603 00e8 3149     		ldr	r1, .L48+56
 604 00ea FFF7FEFF 		bl	sprintf
 605              	.LVL67:
 398:Src/main.c    ****         TIM5->CNT = 0;
 606              		.loc 1 398 0
 607 00ee 01A8     		add	r0, sp, #4
 608 00f0 0421     		movs	r1, #4
 609 00f2 FFF7FEFF 		bl	print
 610              	.LVL68:
 399:Src/main.c    ****     }
 611              		.loc 1 399 0
 612 00f6 0023     		movs	r3, #0
 613 00f8 6362     		str	r3, [r4, #36]
 614 00fa 2BE0     		b	.L40
 615              	.L46:
 401:Src/main.c    ****     {
 616              		.loc 1 401 0
 617 00fc 3046     		mov	r0, r6
 618 00fe 3946     		mov	r1, r7
 619 0100 1FA3     		adr	r3, .L48+8
 620 0102 D3E90023 		ldrd	r2, [r3]
 621 0106 FFF7FEFF 		bl	__aeabi_dcmpgt
 622              	.LVL69:
 623 010a 18B3     		cbz	r0, .L40
 403:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_3, 0);
 624              		.loc 1 403 0
 625 010c 0020     		movs	r0, #0
 626 010e 294B     		ldr	r3, .L48+60
 627 0110 1988     		ldrh	r1, [r3]
 628 0112 FFF7FEFF 		bl	set_motor_speed
 629              	.LVL70:
 404:Src/main.c    ****         while (TIM4->CNT < counts)
 630              		.loc 1 404 0
 631 0116 0820     		movs	r0, #8
 632 0118 0021     		movs	r1, #0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 22


 633 011a FFF7FEFF 		bl	set_motor_speed
 634              	.LVL71:
 405:Src/main.c    ****         {
 635              		.loc 1 405 0
 636 011e 09E0     		b	.L42
 637              	.L43:
 407:Src/main.c    ****             print(msg, 4);
 638              		.loc 1 407 0
 639 0120 1D4B     		ldr	r3, .L48+32
 640 0122 5A6A     		ldr	r2, [r3, #36]
 641 0124 01A8     		add	r0, sp, #4
 642 0126 2449     		ldr	r1, .L48+64
 643 0128 FFF7FEFF 		bl	sprintf
 644              	.LVL72:
 408:Src/main.c    ****         }
 645              		.loc 1 408 0
 646 012c 01A8     		add	r0, sp, #4
 647 012e 0421     		movs	r1, #4
 648 0130 FFF7FEFF 		bl	print
 649              	.LVL73:
 650              	.L42:
 405:Src/main.c    ****         {
 651              		.loc 1 405 0
 652 0134 184B     		ldr	r3, .L48+32
 653 0136 5B6A     		ldr	r3, [r3, #36]
 654 0138 AB42     		cmp	r3, r5
 655 013a F1D3     		bcc	.L43
 410:Src/main.c    ****         print(msg, 4);
 656              		.loc 1 410 0
 657 013c 164C     		ldr	r4, .L48+32
 658 013e 626A     		ldr	r2, [r4, #36]
 659 0140 01A8     		add	r0, sp, #4
 660 0142 1D49     		ldr	r1, .L48+64
 661 0144 FFF7FEFF 		bl	sprintf
 662              	.LVL74:
 411:Src/main.c    ****         TIM4->CNT = 0;
 663              		.loc 1 411 0
 664 0148 01A8     		add	r0, sp, #4
 665 014a 0421     		movs	r1, #4
 666 014c FFF7FEFF 		bl	print
 667              	.LVL75:
 412:Src/main.c    ****     }
 668              		.loc 1 412 0
 669 0150 0023     		movs	r3, #0
 670 0152 6362     		str	r3, [r4, #36]
 671              	.L40:
 414:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, 0);
 672              		.loc 1 414 0
 673 0154 0020     		movs	r0, #0
 674 0156 0146     		mov	r1, r0
 675 0158 FFF7FEFF 		bl	set_motor_speed
 676              	.LVL76:
 415:Src/main.c    ****     HAL_ADC_Stop_DMA(&hadc1);
 677              		.loc 1 415 0
 678 015c 0820     		movs	r0, #8
 679 015e 0021     		movs	r1, #0
 680 0160 FFF7FEFF 		bl	set_motor_speed
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 23


 681              	.LVL77:
 416:Src/main.c    **** }
 682              		.loc 1 416 0
 683 0164 0848     		ldr	r0, .L48+16
 684 0166 FFF7FEFF 		bl	HAL_ADC_Stop_DMA
 685              	.LVL78:
 417:Src/main.c    **** 
 686              		.loc 1 417 0
 687 016a 07B0     		add	sp, sp, #28
 688              	.LCFI12:
 689              		.cfi_def_cfa_offset 28
 690              		@ sp needed
 691 016c BDEC028B 		fldmfdd	sp!, {d8}
 692              	.LCFI13:
 693              		.cfi_restore 80
 694              		.cfi_restore 81
 695              		.cfi_def_cfa_offset 20
 696              	.LVL79:
 697 0170 F0BD     		pop	{r4, r5, r6, r7, pc}
 698              	.LVL80:
 699              	.L49:
 700 0172 00BFAFF3 		.align	3
 700      0080
 701              	.L48:
 702 0178 7B14AE47 		.word	1202590843
 703 017c E17AA4BF 		.word	-1079739679
 704 0180 7B14AE47 		.word	1202590843
 705 0184 E17AA43F 		.word	1067743969
 706 0188 00000000 		.word	hadc1
 707 018c 00000000 		.word	dma_buffer
 708 0190 00000000 		.word	adc_values
 709 0194 00005940 		.word	1079574528
 710 0198 00080040 		.word	1073743872
 711 019c 10000000 		.word	.LC2
 712 01a0 00007A44 		.word	1148846080
 713 01a4 1C000000 		.word	.LC3
 714 01a8 00000000 		.word	.LANCHOR0
 715 01ac 000C0040 		.word	1073744896
 716 01b0 28000000 		.word	.LC4
 717 01b4 00000000 		.word	.LANCHOR1
 718 01b8 38000000 		.word	.LC5
 719              		.cfi_endproc
 720              	.LFE128:
 722              		.global	__aeabi_i2d
 723              		.global	__aeabi_dadd
 724              		.section	.text.turn_deg,"ax",%progbits
 725              		.align	2
 726              		.global	turn_deg
 727              		.thumb
 728              		.thumb_func
 730              	turn_deg:
 731              	.LFB129:
 424:Src/main.c    ****     HAL_ADC_Start_DMA(&hadc1, dma_buffer, sizeof(dma_buffer) / sizeof(dma_buffer[0]));
 732              		.loc 1 424 0
 733              		.cfi_startproc
 734              		@ args = 0, pretend = 0, frame = 24
 735              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 24


 736              	.LVL81:
 737 0000 30B5     		push	{r4, r5, lr}
 738              	.LCFI14:
 739              		.cfi_def_cfa_offset 12
 740              		.cfi_offset 4, -12
 741              		.cfi_offset 5, -8
 742              		.cfi_offset 14, -4
 743 0002 87B0     		sub	sp, sp, #28
 744              	.LCFI15:
 745              		.cfi_def_cfa_offset 40
 746 0004 0546     		mov	r5, r0
 425:Src/main.c    ****     uint16_t counts = 50.0 / 90.0 * (deg - 90) + 50;
 747              		.loc 1 425 0
 748 0006 2C48     		ldr	r0, .L55+8
 749              	.LVL82:
 750 0008 2C49     		ldr	r1, .L55+12
 751 000a 4FF40062 		mov	r2, #2048
 752 000e FFF7FEFF 		bl	HAL_ADC_Start_DMA
 753              	.LVL83:
 426:Src/main.c    ****     TIM4->CNT = 0;
 754              		.loc 1 426 0
 755 0012 A5F15A00 		sub	r0, r5, #90
 756 0016 FFF7FEFF 		bl	__aeabi_i2d
 757              	.LVL84:
 758 001a 25A3     		adr	r3, .L55
 759 001c D3E90023 		ldrd	r2, [r3]
 760 0020 FFF7FEFF 		bl	__aeabi_dmul
 761              	.LVL85:
 762 0024 0022     		movs	r2, #0
 763 0026 264B     		ldr	r3, .L55+16
 764 0028 FFF7FEFF 		bl	__aeabi_dadd
 765              	.LVL86:
 766 002c FFF7FEFF 		bl	__aeabi_d2uiz
 767              	.LVL87:
 768 0030 84B2     		uxth	r4, r0
 769              	.LVL88:
 427:Src/main.c    ****     TIM5->CNT = 0;
 770              		.loc 1 427 0
 771 0032 0023     		movs	r3, #0
 772 0034 234A     		ldr	r2, .L55+20
 773 0036 5362     		str	r3, [r2, #36]
 428:Src/main.c    **** 
 774              		.loc 1 428 0
 775 0038 02F58062 		add	r2, r2, #1024
 776 003c 5362     		str	r3, [r2, #36]
 430:Src/main.c    **** 
 777              		.loc 1 430 0
 778 003e 0193     		str	r3, [sp, #4]
 779 0040 0293     		str	r3, [sp, #8]
 780 0042 0393     		str	r3, [sp, #12]
 781 0044 0493     		str	r3, [sp, #16]
 782 0046 ADF81430 		strh	r3, [sp, #20]	@ movhi
 432:Src/main.c    ****     {
 783              		.loc 1 432 0
 784 004a 1DB3     		cbz	r5, .L51
 434:Src/main.c    ****         set_motor_speed(TIM_CHANNEL_3, 30000);
 785              		.loc 1 434 0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 25


 786 004c 1846     		mov	r0, r3
 787 004e 1946     		mov	r1, r3
 788 0050 FFF7FEFF 		bl	set_motor_speed
 789              	.LVL89:
 435:Src/main.c    ****         while (TIM5->CNT < counts)
 790              		.loc 1 435 0
 791 0054 0820     		movs	r0, #8
 792 0056 47F23051 		movw	r1, #30000
 793 005a FFF7FEFF 		bl	set_motor_speed
 794              	.LVL90:
 436:Src/main.c    ****         {
 795              		.loc 1 436 0
 796 005e 09E0     		b	.L52
 797              	.L53:
 438:Src/main.c    ****             print(msg, 4);
 798              		.loc 1 438 0
 799 0060 194B     		ldr	r3, .L55+24
 800 0062 5A6A     		ldr	r2, [r3, #36]
 801 0064 01A8     		add	r0, sp, #4
 802 0066 1949     		ldr	r1, .L55+28
 803 0068 FFF7FEFF 		bl	sprintf
 804              	.LVL91:
 439:Src/main.c    ****         }
 805              		.loc 1 439 0
 806 006c 01A8     		add	r0, sp, #4
 807 006e 0421     		movs	r1, #4
 808 0070 FFF7FEFF 		bl	print
 809              	.LVL92:
 810              	.L52:
 436:Src/main.c    ****         {
 811              		.loc 1 436 0
 812 0074 144B     		ldr	r3, .L55+24
 813 0076 5B6A     		ldr	r3, [r3, #36]
 814 0078 A342     		cmp	r3, r4
 815 007a F1D3     		bcc	.L53
 441:Src/main.c    ****         print(msg, 4);
 816              		.loc 1 441 0
 817 007c 124C     		ldr	r4, .L55+24
 818              	.LVL93:
 819 007e 626A     		ldr	r2, [r4, #36]
 820 0080 01A8     		add	r0, sp, #4
 821 0082 1249     		ldr	r1, .L55+28
 822 0084 FFF7FEFF 		bl	sprintf
 823              	.LVL94:
 442:Src/main.c    ****         TIM5->CNT = 0;
 824              		.loc 1 442 0
 825 0088 01A8     		add	r0, sp, #4
 826 008a 0421     		movs	r1, #4
 827 008c FFF7FEFF 		bl	print
 828              	.LVL95:
 443:Src/main.c    ****     }
 829              		.loc 1 443 0
 830 0090 0023     		movs	r3, #0
 831 0092 6362     		str	r3, [r4, #36]
 832              	.L51:
 458:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, 0);
 833              		.loc 1 458 0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 26


 834 0094 0020     		movs	r0, #0
 835 0096 0146     		mov	r1, r0
 836 0098 FFF7FEFF 		bl	set_motor_speed
 837              	.LVL96:
 459:Src/main.c    ****     HAL_ADC_Stop_DMA(&hadc1);
 838              		.loc 1 459 0
 839 009c 0820     		movs	r0, #8
 840 009e 0021     		movs	r1, #0
 841 00a0 FFF7FEFF 		bl	set_motor_speed
 842              	.LVL97:
 460:Src/main.c    **** }
 843              		.loc 1 460 0
 844 00a4 0448     		ldr	r0, .L55+8
 845 00a6 FFF7FEFF 		bl	HAL_ADC_Stop_DMA
 846              	.LVL98:
 461:Src/main.c    **** 
 847              		.loc 1 461 0
 848 00aa 07B0     		add	sp, sp, #28
 849              	.LCFI16:
 850              		.cfi_def_cfa_offset 12
 851              		@ sp needed
 852 00ac 30BD     		pop	{r4, r5, pc}
 853              	.L56:
 854 00ae 00BF     		.align	3
 855              	.L55:
 856 00b0 721CC771 		.word	1908874354
 857 00b4 1CC7E13F 		.word	1071761180
 858 00b8 00000000 		.word	hadc1
 859 00bc 00000000 		.word	dma_buffer
 860 00c0 00004940 		.word	1078525952
 861 00c4 00080040 		.word	1073743872
 862 00c8 000C0040 		.word	1073744896
 863 00cc 28000000 		.word	.LC4
 864              		.cfi_endproc
 865              	.LFE129:
 867              		.section	.text.encoder_pid,"ax",%progbits
 868              		.align	2
 869              		.global	encoder_pid
 870              		.thumb
 871              		.thumb_func
 873              	encoder_pid:
 874              	.LFB135:
 551:Src/main.c    **** }
 552:Src/main.c    **** 
 553:Src/main.c    **** void encoder_pid(PID_t *enc_pid)
 554:Src/main.c    **** {
 875              		.loc 1 554 0
 876              		.cfi_startproc
 877              		@ args = 0, pretend = 0, frame = 24
 878              		@ frame_needed = 0, uses_anonymous_args = 0
 879              	.LVL99:
 880 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 881              	.LCFI17:
 882              		.cfi_def_cfa_offset 24
 883              		.cfi_offset 4, -24
 884              		.cfi_offset 5, -20
 885              		.cfi_offset 6, -16
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 27


 886              		.cfi_offset 7, -12
 887              		.cfi_offset 8, -8
 888              		.cfi_offset 14, -4
 889 0004 86B0     		sub	sp, sp, #24
 890              	.LCFI18:
 891              		.cfi_def_cfa_offset 48
 555:Src/main.c    ****     /* Get error */
 556:Src/main.c    ****     uint32_t lcnt = TIM4->CNT;
 892              		.loc 1 556 0
 893 0006 264B     		ldr	r3, .L63
 894 0008 5F6A     		ldr	r7, [r3, #36]
 895              	.LVL100:
 557:Src/main.c    ****     uint32_t rcnt = TIM5->CNT;
 896              		.loc 1 557 0
 897 000a 03F58063 		add	r3, r3, #1024
 898 000e D3F82480 		ldr	r8, [r3, #36]
 899              	.LVL101:
 558:Src/main.c    ****     enc_pid->err = lcnt - rcnt;
 900              		.loc 1 558 0
 901 0012 C8EB0703 		rsb	r3, r8, r7
 902 0016 0361     		str	r3, [r0, #16]
 559:Src/main.c    **** 
 560:Src/main.c    ****     /* Get gain */
 561:Src/main.c    ****     // Gain <0 for ride side faster
 562:Src/main.c    ****     int gain = pid_GetGain(enc_pid);
 903              		.loc 1 562 0
 904 0018 FFF7FEFF 		bl	pid_GetGain
 905              	.LVL102:
 563:Src/main.c    **** 
 564:Src/main.c    ****     /* Set Motor Speeds*/
 565:Src/main.c    ****     uint32_t lspeed = LEFT_SPEED;
 906              		.loc 1 565 0
 907 001c 214B     		ldr	r3, .L63+4
 908 001e 1E88     		ldrh	r6, [r3]
 909              	.LVL103:
 566:Src/main.c    ****     uint32_t rspeed = RIGHT_SPEED;
 910              		.loc 1 566 0
 911 0020 214B     		ldr	r3, .L63+8
 912 0022 1D88     		ldrh	r5, [r3]
 913              	.LVL104:
 567:Src/main.c    ****     if (gain < 0)
 914              		.loc 1 567 0
 915 0024 0028     		cmp	r0, #0
 916 0026 01DA     		bge	.L58
 568:Src/main.c    ****     {
 569:Src/main.c    ****         lspeed -= gain;
 917              		.loc 1 569 0
 918 0028 361A     		subs	r6, r6, r0
 919              	.LVL105:
 920 002a 02E0     		b	.L59
 921              	.L58:
 570:Src/main.c    ****     }
 571:Src/main.c    ****     else if (gain > 0)
 922              		.loc 1 571 0
 923 002c 0028     		cmp	r0, #0
 924 002e 00DD     		ble	.L59
 572:Src/main.c    ****     {
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 28


 573:Src/main.c    ****         rspeed += gain;
 925              		.loc 1 573 0
 926 0030 0544     		add	r5, r5, r0
 927              	.LVL106:
 928              	.L59:
 574:Src/main.c    ****     }
 575:Src/main.c    **** 
 576:Src/main.c    ****     char msg[18] = "";
 929              		.loc 1 576 0
 930 0032 0024     		movs	r4, #0
 931 0034 0194     		str	r4, [sp, #4]
 932 0036 0294     		str	r4, [sp, #8]
 933 0038 0394     		str	r4, [sp, #12]
 934 003a 0494     		str	r4, [sp, #16]
 935 003c ADF81440 		strh	r4, [sp, #20]	@ movhi
 577:Src/main.c    ****     sprintf(msg, "LS: %lu", lspeed);
 936              		.loc 1 577 0
 937 0040 01A8     		add	r0, sp, #4
 938              	.LVL107:
 939 0042 1A49     		ldr	r1, .L63+12
 940 0044 3246     		mov	r2, r6
 941 0046 FFF7FEFF 		bl	sprintf
 942              	.LVL108:
 578:Src/main.c    ****     print(msg, 0);
 943              		.loc 1 578 0
 944 004a 01A8     		add	r0, sp, #4
 945 004c 2146     		mov	r1, r4
 946 004e FFF7FEFF 		bl	print
 947              	.LVL109:
 579:Src/main.c    ****     sprintf(msg, "RS: %lu", rspeed);
 948              		.loc 1 579 0
 949 0052 01A8     		add	r0, sp, #4
 950 0054 1649     		ldr	r1, .L63+16
 951 0056 2A46     		mov	r2, r5
 952 0058 FFF7FEFF 		bl	sprintf
 953              	.LVL110:
 580:Src/main.c    ****     print(msg, 1);
 954              		.loc 1 580 0
 955 005c 01A8     		add	r0, sp, #4
 956 005e 0121     		movs	r1, #1
 957 0060 FFF7FEFF 		bl	print
 958              	.LVL111:
 581:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_1, lspeed);
 959              		.loc 1 581 0
 960 0064 2046     		mov	r0, r4
 961 0066 3146     		mov	r1, r6
 962 0068 FFF7FEFF 		bl	set_motor_speed
 963              	.LVL112:
 582:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, rspeed);
 964              		.loc 1 582 0
 965 006c 0820     		movs	r0, #8
 966 006e 2946     		mov	r1, r5
 967 0070 FFF7FEFF 		bl	set_motor_speed
 968              	.LVL113:
 583:Src/main.c    **** 
 584:Src/main.c    ****     /* Prevent weird overflow shit */
 585:Src/main.c    ****     if (lcnt > 60000 || rcnt > 60000)
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 29


 969              		.loc 1 585 0
 970 0074 4EF66023 		movw	r3, #60000
 971 0078 9F42     		cmp	r7, r3
 972 007a 01D8     		bhi	.L60
 973              		.loc 1 585 0 is_stmt 0 discriminator 1
 974 007c 9845     		cmp	r8, r3
 975 007e 0CD9     		bls	.L57
 976              	.L60:
 586:Src/main.c    ****     {
 587:Src/main.c    ****         TIM4->CNT -= 50000;
 977              		.loc 1 587 0 is_stmt 1
 978 0080 074A     		ldr	r2, .L63
 979 0082 536A     		ldr	r3, [r2, #36]
 980 0084 A3F54343 		sub	r3, r3, #49920
 981 0088 503B     		subs	r3, r3, #80
 982 008a 5362     		str	r3, [r2, #36]
 588:Src/main.c    ****         TIM5->CNT -= 50000;
 983              		.loc 1 588 0
 984 008c 02F58062 		add	r2, r2, #1024
 985 0090 536A     		ldr	r3, [r2, #36]
 986 0092 A3F54343 		sub	r3, r3, #49920
 987 0096 503B     		subs	r3, r3, #80
 988 0098 5362     		str	r3, [r2, #36]
 989              	.L57:
 589:Src/main.c    ****     }
 590:Src/main.c    **** }
 990              		.loc 1 590 0
 991 009a 06B0     		add	sp, sp, #24
 992              	.LCFI19:
 993              		.cfi_def_cfa_offset 24
 994              		@ sp needed
 995 009c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 996              	.LVL114:
 997              	.L64:
 998              		.align	2
 999              	.L63:
 1000 00a0 00080040 		.word	1073743872
 1001 00a4 00000000 		.word	.LANCHOR1
 1002 00a8 00000000 		.word	.LANCHOR0
 1003 00ac 48000000 		.word	.LC6
 1004 00b0 50000000 		.word	.LC7
 1005              		.cfi_endproc
 1006              	.LFE135:
 1008              		.section	.text.drive_straight,"ax",%progbits
 1009              		.align	2
 1010              		.global	drive_straight
 1011              		.thumb
 1012              		.thumb_func
 1014              	drive_straight:
 1015              	.LFB127:
 361:Src/main.c    ****     encoder_pid(enc_pid);
 1016              		.loc 1 361 0
 1017              		.cfi_startproc
 1018              		@ args = 0, pretend = 0, frame = 0
 1019              		@ frame_needed = 0, uses_anonymous_args = 0
 1020              	.LVL115:
 1021 0000 08B5     		push	{r3, lr}
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 30


 1022              	.LCFI20:
 1023              		.cfi_def_cfa_offset 8
 1024              		.cfi_offset 3, -8
 1025              		.cfi_offset 14, -4
 362:Src/main.c    ****     HAL_Delay(10);
 1026              		.loc 1 362 0
 1027 0002 FFF7FEFF 		bl	encoder_pid
 1028              	.LVL116:
 363:Src/main.c    **** }
 1029              		.loc 1 363 0
 1030 0006 0A20     		movs	r0, #10
 1031 0008 FFF7FEFF 		bl	HAL_Delay
 1032              	.LVL117:
 1033 000c 08BD     		pop	{r3, pc}
 1034              		.cfi_endproc
 1035              	.LFE127:
 1037 000e 00BF     		.section	.text.square_edge,"ax",%progbits
 1038              		.align	2
 1039              		.global	square_edge
 1040              		.thumb
 1041              		.thumb_func
 1043              	square_edge:
 1044              	.LFB126:
 338:Src/main.c    ****     while (1)
 1045              		.loc 1 338 0
 1046              		.cfi_startproc
 1047              		@ args = 0, pretend = 0, frame = 0
 1048              		@ frame_needed = 0, uses_anonymous_args = 0
 1049              	.LVL118:
 1050 0000 10B5     		push	{r4, lr}
 1051              	.LCFI21:
 1052              		.cfi_def_cfa_offset 8
 1053              		.cfi_offset 4, -8
 1054              		.cfi_offset 14, -4
 1055 0002 0446     		mov	r4, r0
 1056              	.LVL119:
 1057              	.L68:
 341:Src/main.c    ****         if (EDGE_LEFT_STATE == FLAGGED || EDGE_RIGHT_STATE == FLAGGED)
 1058              		.loc 1 341 0
 1059 0004 2046     		mov	r0, r4
 1060 0006 FFF7FEFF 		bl	drive_straight
 1061              	.LVL120:
 342:Src/main.c    ****         {
 1062              		.loc 1 342 0
 1063 000a 0E4B     		ldr	r3, .L74
 1064 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1065 000e 012B     		cmp	r3, #1
 1066 0010 03D0     		beq	.L69
 342:Src/main.c    ****         {
 1067              		.loc 1 342 0 is_stmt 0 discriminator 1
 1068 0012 0D4A     		ldr	r2, .L74+4
 1069 0014 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1070 0016 012A     		cmp	r2, #1
 1071 0018 0ED1     		bne	.L70
 1072              	.L69:
 344:Src/main.c    ****             {
 1073              		.loc 1 344 0 is_stmt 1
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 31


 1074 001a 012B     		cmp	r3, #1
 1075 001c 03D1     		bne	.L71
 346:Src/main.c    ****             }
 1076              		.loc 1 346 0
 1077 001e 0020     		movs	r0, #0
 1078 0020 0146     		mov	r1, r0
 1079 0022 FFF7FEFF 		bl	set_motor_speed
 1080              	.LVL121:
 1081              	.L71:
 348:Src/main.c    ****             {
 1082              		.loc 1 348 0
 1083 0026 084B     		ldr	r3, .L74+4
 1084 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1085 002a 012B     		cmp	r3, #1
 1086 002c EAD1     		bne	.L68
 350:Src/main.c    ****             }
 1087              		.loc 1 350 0
 1088 002e 0820     		movs	r0, #8
 1089 0030 0021     		movs	r1, #0
 1090 0032 FFF7FEFF 		bl	set_motor_speed
 1091              	.LVL122:
 1092 0036 E5E7     		b	.L68
 1093              	.L70:
 353:Src/main.c    ****         {
 1094              		.loc 1 353 0
 1095 0038 012B     		cmp	r3, #1
 1096 003a E3D1     		bne	.L68
 353:Src/main.c    ****         {
 1097              		.loc 1 353 0 is_stmt 0 discriminator 1
 1098 003c 012A     		cmp	r2, #1
 1099 003e E1D1     		bne	.L68
 358:Src/main.c    **** 
 1100              		.loc 1 358 0 is_stmt 1
 1101 0040 10BD     		pop	{r4, pc}
 1102              	.LVL123:
 1103              	.L75:
 1104 0042 00BF     		.align	2
 1105              	.L74:
 1106 0044 00000000 		.word	EDGE_LEFT_STATE
 1107 0048 00000000 		.word	EDGE_RIGHT_STATE
 1108              		.cfi_endproc
 1109              	.LFE126:
 1111              		.section	.text.test_PWM_htim1,"ax",%progbits
 1112              		.align	2
 1113              		.global	test_PWM_htim1
 1114              		.thumb
 1115              		.thumb_func
 1117              	test_PWM_htim1:
 1118              	.LFB136:
 591:Src/main.c    **** 
 592:Src/main.c    **** // ******
 593:Src/main.c    **** // TESTS
 594:Src/main.c    **** // ******
 595:Src/main.c    **** 
 596:Src/main.c    **** /*
 597:Src/main.c    ****  * Instructions:
 598:Src/main.c    ****  *      Run test_All() before the main while loop
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 32


 599:Src/main.c    ****  *      - Put a pull up resistor on htim3 PWM waves, measure voltage on pin
 600:Src/main.c    ****  *      - Measure voltage on pin of htim1
 601:Src/main.c    ****  *      - Give ADC pins values and read off of screen
 602:Src/main.c    ****  */
 603:Src/main.c    **** 
 604:Src/main.c    **** /*
 605:Src/main.c    ****  * Test PWM
 606:Src/main.c    ****  * Output: htim1 channel 1 through 4, PWM wave. Confirm these
 607:Src/main.c    ****  *         PWM waves via an oscilliscope.
 608:Src/main.c    ****  */
 609:Src/main.c    **** void test_PWM_htim1()
 610:Src/main.c    **** {
 1119              		.loc 1 610 0
 1120              		.cfi_startproc
 1121              		@ args = 0, pretend = 0, frame = 0
 1122              		@ frame_needed = 0, uses_anonymous_args = 0
 1123 0000 10B5     		push	{r4, lr}
 1124              	.LCFI22:
 1125              		.cfi_def_cfa_offset 8
 1126              		.cfi_offset 4, -8
 1127              		.cfi_offset 14, -4
 611:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_1);
 1128              		.loc 1 611 0
 1129 0002 0C4C     		ldr	r4, .L78
 1130 0004 2046     		mov	r0, r4
 1131 0006 0021     		movs	r1, #0
 1132 0008 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1133              	.LVL124:
 612:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_2);
 1134              		.loc 1 612 0
 1135 000c 2046     		mov	r0, r4
 1136 000e 0421     		movs	r1, #4
 1137 0010 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1138              	.LVL125:
 613:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_3);
 1139              		.loc 1 613 0
 1140 0014 2046     		mov	r0, r4
 1141 0016 0821     		movs	r1, #8
 1142 0018 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1143              	.LVL126:
 614:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_4);
 1144              		.loc 1 614 0
 1145 001c 2046     		mov	r0, r4
 1146 001e 0C21     		movs	r1, #12
 1147 0020 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1148              	.LVL127:
 615:Src/main.c    **** 
 616:Src/main.c    ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, 500);
 1149              		.loc 1 616 0
 1150 0024 2368     		ldr	r3, [r4]
 1151 0026 4FF4FA72 		mov	r2, #500
 1152 002a 5A63     		str	r2, [r3, #52]
 617:Src/main.c    ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, 500);
 1153              		.loc 1 617 0
 1154 002c 9A63     		str	r2, [r3, #56]
 618:Src/main.c    ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, 500);
 1155              		.loc 1 618 0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 33


 1156 002e DA63     		str	r2, [r3, #60]
 619:Src/main.c    ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_4, 500);
 1157              		.loc 1 619 0
 1158 0030 1A64     		str	r2, [r3, #64]
 1159 0032 10BD     		pop	{r4, pc}
 1160              	.L79:
 1161              		.align	2
 1162              	.L78:
 1163 0034 00000000 		.word	htim1
 1164              		.cfi_endproc
 1165              	.LFE136:
 1167              		.section	.text.test_PWM_htim3,"ax",%progbits
 1168              		.align	2
 1169              		.global	test_PWM_htim3
 1170              		.thumb
 1171              		.thumb_func
 1173              	test_PWM_htim3:
 1174              	.LFB137:
 620:Src/main.c    **** }
 621:Src/main.c    **** 
 622:Src/main.c    **** /*
 623:Src/main.c    ****  * Test PWM
 624:Src/main.c    ****  * Output: htim3 channel 1 through 3, PWM wave. Confirm these
 625:Src/main.c    ****  *         PWM waves via an oscilliscope.
 626:Src/main.c    ****  */
 627:Src/main.c    **** void test_PWM_htim3()
 628:Src/main.c    **** {
 1175              		.loc 1 628 0
 1176              		.cfi_startproc
 1177              		@ args = 0, pretend = 0, frame = 0
 1178              		@ frame_needed = 0, uses_anonymous_args = 0
 1179 0000 10B5     		push	{r4, lr}
 1180              	.LCFI23:
 1181              		.cfi_def_cfa_offset 8
 1182              		.cfi_offset 4, -8
 1183              		.cfi_offset 14, -4
 629:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_1);
 1184              		.loc 1 629 0
 1185 0002 0A4C     		ldr	r4, .L82
 1186 0004 2046     		mov	r0, r4
 1187 0006 0021     		movs	r1, #0
 1188 0008 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1189              	.LVL128:
 630:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_2);
 1190              		.loc 1 630 0
 1191 000c 2046     		mov	r0, r4
 1192 000e 0421     		movs	r1, #4
 1193 0010 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1194              	.LVL129:
 631:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_3);
 1195              		.loc 1 631 0
 1196 0014 2046     		mov	r0, r4
 1197 0016 0821     		movs	r1, #8
 1198 0018 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1199              	.LVL130:
 632:Src/main.c    **** 
 633:Src/main.c    ****     __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_1, 500);
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 34


 1200              		.loc 1 633 0
 1201 001c 2368     		ldr	r3, [r4]
 1202 001e 4FF4FA72 		mov	r2, #500
 1203 0022 5A63     		str	r2, [r3, #52]
 634:Src/main.c    ****     __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_2, 500);
 1204              		.loc 1 634 0
 1205 0024 9A63     		str	r2, [r3, #56]
 635:Src/main.c    ****     __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_3, 500);
 1206              		.loc 1 635 0
 1207 0026 DA63     		str	r2, [r3, #60]
 1208 0028 10BD     		pop	{r4, pc}
 1209              	.L83:
 1210 002a 00BF     		.align	2
 1211              	.L82:
 1212 002c 00000000 		.word	htim3
 1213              		.cfi_endproc
 1214              	.LFE137:
 1216              		.section	.text.test_ADC,"ax",%progbits
 1217              		.align	2
 1218              		.global	test_ADC
 1219              		.thumb
 1220              		.thumb_func
 1222              	test_ADC:
 1223              	.LFB138:
 636:Src/main.c    **** }
 637:Src/main.c    **** 
 638:Src/main.c    **** void test_ADC()
 639:Src/main.c    **** {
 1224              		.loc 1 639 0
 1225              		.cfi_startproc
 1226              		@ args = 0, pretend = 0, frame = 24
 1227              		@ frame_needed = 0, uses_anonymous_args = 0
 1228 0000 10B5     		push	{r4, lr}
 1229              	.LCFI24:
 1230              		.cfi_def_cfa_offset 8
 1231              		.cfi_offset 4, -8
 1232              		.cfi_offset 14, -4
 1233 0002 86B0     		sub	sp, sp, #24
 1234              	.LCFI25:
 1235              		.cfi_def_cfa_offset 32
 640:Src/main.c    ****     char msg[18] = "";
 1236              		.loc 1 640 0
 1237 0004 0023     		movs	r3, #0
 1238 0006 0193     		str	r3, [sp, #4]
 1239 0008 0293     		str	r3, [sp, #8]
 1240 000a 0393     		str	r3, [sp, #12]
 1241 000c 0493     		str	r3, [sp, #16]
 1242 000e ADF81430 		strh	r3, [sp, #20]	@ movhi
 641:Src/main.c    ****     HAL_ADC_Start_DMA(&hadc1, dma_buffer, sizeof(dma_buffer) / sizeof(dma_buffer[0]));
 1243              		.loc 1 641 0
 1244 0012 0F48     		ldr	r0, .L87
 1245 0014 0F49     		ldr	r1, .L87+4
 1246 0016 4FF40062 		mov	r2, #2048
 1247 001a FFF7FEFF 		bl	HAL_ADC_Start_DMA
 1248              	.LVL131:
 1249              	.L85:
 1250              	.LBB2:
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 35


 642:Src/main.c    **** 
 643:Src/main.c    ****     while (1)
 644:Src/main.c    ****     {
 645:Src/main.c    ****         int ch_5 = adc_values[0];
 1251              		.loc 1 645 0 discriminator 1
 1252 001e 0E4B     		ldr	r3, .L87+8
 1253              	.LVL132:
 646:Src/main.c    ****         int ch_4 = adc_values[1];
 1254              		.loc 1 646 0 discriminator 1
 1255 0020 5C68     		ldr	r4, [r3, #4]
 1256              	.LVL133:
 647:Src/main.c    **** 
 648:Src/main.c    ****         sprintf(msg, "ch_5: %d", ch_5);
 1257              		.loc 1 648 0 discriminator 1
 1258 0022 01A8     		add	r0, sp, #4
 1259 0024 0D49     		ldr	r1, .L87+12
 1260 0026 1A68     		ldr	r2, [r3]
 1261 0028 FFF7FEFF 		bl	sprintf
 1262              	.LVL134:
 649:Src/main.c    ****         print(msg, 0);
 1263              		.loc 1 649 0 discriminator 1
 1264 002c 01A8     		add	r0, sp, #4
 1265 002e 0021     		movs	r1, #0
 1266 0030 FFF7FEFF 		bl	print
 1267              	.LVL135:
 650:Src/main.c    **** 
 651:Src/main.c    ****         sprintf(msg, "ch_4: %d", ch_4);
 1268              		.loc 1 651 0 discriminator 1
 1269 0034 01A8     		add	r0, sp, #4
 1270 0036 0A49     		ldr	r1, .L87+16
 1271 0038 2246     		mov	r2, r4
 1272 003a FFF7FEFF 		bl	sprintf
 1273              	.LVL136:
 652:Src/main.c    ****         print(msg, 2);
 1274              		.loc 1 652 0 discriminator 1
 1275 003e 01A8     		add	r0, sp, #4
 1276 0040 0221     		movs	r1, #2
 1277 0042 FFF7FEFF 		bl	print
 1278              	.LVL137:
 653:Src/main.c    **** 
 654:Src/main.c    ****         HAL_Delay(100);
 1279              		.loc 1 654 0 discriminator 1
 1280 0046 6420     		movs	r0, #100
 1281 0048 FFF7FEFF 		bl	HAL_Delay
 1282              	.LVL138:
 1283              	.LBE2:
 655:Src/main.c    ****     }
 1284              		.loc 1 655 0 discriminator 1
 1285 004c E7E7     		b	.L85
 1286              	.L88:
 1287 004e 00BF     		.align	2
 1288              	.L87:
 1289 0050 00000000 		.word	hadc1
 1290 0054 00000000 		.word	dma_buffer
 1291 0058 00000000 		.word	adc_values
 1292 005c 58000000 		.word	.LC8
 1293 0060 64000000 		.word	.LC9
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 36


 1294              		.cfi_endproc
 1295              	.LFE138:
 1297              		.section	.text.test_All,"ax",%progbits
 1298              		.align	2
 1299              		.global	test_All
 1300              		.thumb
 1301              		.thumb_func
 1303              	test_All:
 1304              	.LFB139:
 656:Src/main.c    **** }
 657:Src/main.c    **** 
 658:Src/main.c    **** /**
 659:Src/main.c    ****  * Test all PWM and ADC - Read PWM waves, input ADC voltages 
 660:Src/main.c    ****  * and read values on OLED
 661:Src/main.c    ****  *      htim1 -> CH1, CH2, CH3, CH4
 662:Src/main.c    ****  *      htim3 -> CH1, CH2, CH3
 663:Src/main.c    ****  *      ADC   -> CH5, CH4
 664:Src/main.c    ****  */
 665:Src/main.c    **** void test_All()
 666:Src/main.c    **** {
 1305              		.loc 1 666 0
 1306              		.cfi_startproc
 1307              		@ Volatile: function does not return.
 1308              		@ args = 0, pretend = 0, frame = 0
 1309              		@ frame_needed = 0, uses_anonymous_args = 0
 1310 0000 08B5     		push	{r3, lr}
 1311              	.LCFI26:
 1312              		.cfi_def_cfa_offset 8
 1313              		.cfi_offset 3, -8
 1314              		.cfi_offset 14, -4
 667:Src/main.c    ****     test_PWM_htim1();
 1315              		.loc 1 667 0
 1316 0002 FFF7FEFF 		bl	test_PWM_htim1
 1317              	.LVL139:
 668:Src/main.c    ****     test_PWM_htim3();
 1318              		.loc 1 668 0
 1319 0006 FFF7FEFF 		bl	test_PWM_htim3
 1320              	.LVL140:
 669:Src/main.c    ****     test_ADC();
 1321              		.loc 1 669 0
 1322 000a FFF7FEFF 		bl	test_ADC
 1323              	.LVL141:
 1324              		.cfi_endproc
 1325              	.LFE139:
 1327 000e 00BF     		.section	.text._Error_Handler,"ax",%progbits
 1328              		.align	2
 1329              		.global	_Error_Handler
 1330              		.thumb
 1331              		.thumb_func
 1333              	_Error_Handler:
 1334              	.LFB140:
 670:Src/main.c    **** }
 671:Src/main.c    **** // ******
 672:Src/main.c    **** // END TESTS
 673:Src/main.c    **** // ******
 674:Src/main.c    **** 
 675:Src/main.c    **** /* USER CODE END 4 */
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 37


 676:Src/main.c    **** 
 677:Src/main.c    **** /**
 678:Src/main.c    ****  * @brief  This function is executed in case of error occurrence.
 679:Src/main.c    ****  * @param  file: The file name as string.
 680:Src/main.c    ****  * @param  line: The line in file as a number.
 681:Src/main.c    ****  * @retval None
 682:Src/main.c    ****  */
 683:Src/main.c    **** void _Error_Handler(char *file, int line)
 684:Src/main.c    **** {
 1335              		.loc 1 684 0
 1336              		.cfi_startproc
 1337              		@ Volatile: function does not return.
 1338              		@ args = 0, pretend = 0, frame = 0
 1339              		@ frame_needed = 0, uses_anonymous_args = 0
 1340              		@ link register save eliminated.
 1341              	.LVL142:
 1342              	.L92:
 685:Src/main.c    ****     /* USER CODE BEGIN Error_Handler_Debug */
 686:Src/main.c    ****     /* User can add his own implementation to report the HAL error return state */
 687:Src/main.c    ****     while (1)
 688:Src/main.c    ****     {
 689:Src/main.c    ****     }
 1343              		.loc 1 689 0 discriminator 1
 1344 0000 FEE7     		b	.L92
 1345              		.cfi_endproc
 1346              	.LFE140:
 1348 0002 00BF     		.section	.text.SystemClock_Config,"ax",%progbits
 1349              		.align	2
 1350              		.global	SystemClock_Config
 1351              		.thumb
 1352              		.thumb_func
 1354              	SystemClock_Config:
 1355              	.LFB125:
 283:Src/main.c    **** 
 1356              		.loc 1 283 0
 1357              		.cfi_startproc
 1358              		@ args = 0, pretend = 0, frame = 80
 1359              		@ frame_needed = 0, uses_anonymous_args = 0
 1360 0000 00B5     		push	{lr}
 1361              	.LCFI27:
 1362              		.cfi_def_cfa_offset 4
 1363              		.cfi_offset 14, -4
 1364 0002 95B0     		sub	sp, sp, #84
 1365              	.LCFI28:
 1366              		.cfi_def_cfa_offset 88
 1367              	.LBB3:
 290:Src/main.c    **** 
 1368              		.loc 1 290 0
 1369 0004 0022     		movs	r2, #0
 1370 0006 0192     		str	r2, [sp, #4]
 1371 0008 2A4B     		ldr	r3, .L97
 1372 000a 196C     		ldr	r1, [r3, #64]
 1373 000c 41F08051 		orr	r1, r1, #268435456
 1374 0010 1964     		str	r1, [r3, #64]
 1375 0012 1B6C     		ldr	r3, [r3, #64]
 1376 0014 03F08053 		and	r3, r3, #268435456
 1377 0018 0193     		str	r3, [sp, #4]
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 38


 1378 001a 019B     		ldr	r3, [sp, #4]
 1379              	.LBE3:
 1380              	.LBB4:
 292:Src/main.c    **** 
 1381              		.loc 1 292 0
 1382 001c 0292     		str	r2, [sp, #8]
 1383 001e 2649     		ldr	r1, .L97+4
 1384 0020 0B68     		ldr	r3, [r1]
 1385 0022 23F44043 		bic	r3, r3, #49152
 1386 0026 43F40043 		orr	r3, r3, #32768
 1387 002a 0B60     		str	r3, [r1]
 1388 002c 0B68     		ldr	r3, [r1]
 1389 002e 03F44043 		and	r3, r3, #49152
 1390 0032 0293     		str	r3, [sp, #8]
 1391 0034 029B     		ldr	r3, [sp, #8]
 1392              	.LBE4:
 296:Src/main.c    ****     RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 1393              		.loc 1 296 0
 1394 0036 0223     		movs	r3, #2
 1395 0038 0893     		str	r3, [sp, #32]
 297:Src/main.c    ****     RCC_OscInitStruct.HSICalibrationValue = 16;
 1396              		.loc 1 297 0
 1397 003a 0121     		movs	r1, #1
 1398 003c 0B91     		str	r1, [sp, #44]
 298:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 1399              		.loc 1 298 0
 1400 003e 1021     		movs	r1, #16
 1401 0040 0C91     		str	r1, [sp, #48]
 299:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
 1402              		.loc 1 299 0
 1403 0042 0E93     		str	r3, [sp, #56]
 300:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLM = 8;
 1404              		.loc 1 300 0
 1405 0044 0F92     		str	r2, [sp, #60]
 301:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLN = 72;
 1406              		.loc 1 301 0
 1407 0046 0822     		movs	r2, #8
 1408 0048 1092     		str	r2, [sp, #64]
 302:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
 1409              		.loc 1 302 0
 1410 004a 4822     		movs	r2, #72
 1411 004c 1192     		str	r2, [sp, #68]
 303:Src/main.c    ****     RCC_OscInitStruct.PLL.PLLQ = 4;
 1412              		.loc 1 303 0
 1413 004e 1293     		str	r3, [sp, #72]
 304:Src/main.c    ****     if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 1414              		.loc 1 304 0
 1415 0050 0423     		movs	r3, #4
 1416 0052 1393     		str	r3, [sp, #76]
 305:Src/main.c    ****     {
 1417              		.loc 1 305 0
 1418 0054 08A8     		add	r0, sp, #32
 1419 0056 FFF7FEFF 		bl	HAL_RCC_OscConfig
 1420              	.LVL143:
 1421 005a 20B1     		cbz	r0, .L94
 307:Src/main.c    ****     }
 1422              		.loc 1 307 0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 39


 1423 005c 1748     		ldr	r0, .L97+8
 1424 005e 40F23311 		movw	r1, #307
 1425 0062 FFF7FEFF 		bl	_Error_Handler
 1426              	.LVL144:
 1427              	.L94:
 312:Src/main.c    ****     RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 1428              		.loc 1 312 0
 1429 0066 0F23     		movs	r3, #15
 1430 0068 0393     		str	r3, [sp, #12]
 313:Src/main.c    ****     RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 1431              		.loc 1 313 0
 1432 006a 0221     		movs	r1, #2
 1433 006c 0491     		str	r1, [sp, #16]
 314:Src/main.c    ****     RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;
 1434              		.loc 1 314 0
 1435 006e 0023     		movs	r3, #0
 1436 0070 0593     		str	r3, [sp, #20]
 315:Src/main.c    ****     RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 1437              		.loc 1 315 0
 1438 0072 4FF48052 		mov	r2, #4096
 1439 0076 0692     		str	r2, [sp, #24]
 316:Src/main.c    **** 
 1440              		.loc 1 316 0
 1441 0078 0793     		str	r3, [sp, #28]
 318:Src/main.c    ****     {
 1442              		.loc 1 318 0
 1443 007a 03A8     		add	r0, sp, #12
 1444 007c FFF7FEFF 		bl	HAL_RCC_ClockConfig
 1445              	.LVL145:
 1446 0080 20B1     		cbz	r0, .L95
 320:Src/main.c    ****     }
 1447              		.loc 1 320 0
 1448 0082 0E48     		ldr	r0, .L97+8
 1449 0084 4FF4A071 		mov	r1, #320
 1450 0088 FFF7FEFF 		bl	_Error_Handler
 1451              	.LVL146:
 1452              	.L95:
 325:Src/main.c    **** 
 1453              		.loc 1 325 0
 1454 008c FFF7FEFF 		bl	HAL_RCC_GetHCLKFreq
 1455              	.LVL147:
 1456 0090 0B4B     		ldr	r3, .L97+12
 1457 0092 A3FB0030 		umull	r3, r0, r3, r0
 1458 0096 8009     		lsrs	r0, r0, #6
 1459 0098 FFF7FEFF 		bl	HAL_SYSTICK_Config
 1460              	.LVL148:
 329:Src/main.c    **** 
 1461              		.loc 1 329 0
 1462 009c 0420     		movs	r0, #4
 1463 009e FFF7FEFF 		bl	HAL_SYSTICK_CLKSourceConfig
 1464              	.LVL149:
 332:Src/main.c    **** }
 1465              		.loc 1 332 0
 1466 00a2 4FF0FF30 		mov	r0, #-1
 1467 00a6 0021     		movs	r1, #0
 1468 00a8 0A46     		mov	r2, r1
 1469 00aa FFF7FEFF 		bl	HAL_NVIC_SetPriority
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 40


 1470              	.LVL150:
 333:Src/main.c    **** 
 1471              		.loc 1 333 0
 1472 00ae 15B0     		add	sp, sp, #84
 1473              	.LCFI29:
 1474              		.cfi_def_cfa_offset 4
 1475              		@ sp needed
 1476 00b0 5DF804FB 		ldr	pc, [sp], #4
 1477              	.L98:
 1478              		.align	2
 1479              	.L97:
 1480 00b4 00380240 		.word	1073887232
 1481 00b8 00700040 		.word	1073770496
 1482 00bc 70000000 		.word	.LC10
 1483 00c0 D34D6210 		.word	274877907
 1484              		.cfi_endproc
 1485              	.LFE125:
 1487              		.section	.text.main,"ax",%progbits
 1488              		.align	2
 1489              		.global	main
 1490              		.thumb
 1491              		.thumb_func
 1493              	main:
 1494              	.LFB124:
 111:Src/main.c    ****     /* USER CODE BEGIN 1 */
 1495              		.loc 1 111 0
 1496              		.cfi_startproc
 1497              		@ args = 0, pretend = 0, frame = 48
 1498              		@ frame_needed = 0, uses_anonymous_args = 0
 1499 0000 30B5     		push	{r4, r5, lr}
 1500              	.LCFI30:
 1501              		.cfi_def_cfa_offset 12
 1502              		.cfi_offset 4, -12
 1503              		.cfi_offset 5, -8
 1504              		.cfi_offset 14, -4
 1505 0002 8FB0     		sub	sp, sp, #60
 1506              	.LCFI31:
 1507              		.cfi_def_cfa_offset 72
 119:Src/main.c    **** 
 1508              		.loc 1 119 0
 1509 0004 FFF7FEFF 		bl	HAL_Init
 1510              	.LVL151:
 126:Src/main.c    **** 
 1511              		.loc 1 126 0
 1512 0008 FFF7FEFF 		bl	SystemClock_Config
 1513              	.LVL152:
 133:Src/main.c    ****     MX_DMA_Init();
 1514              		.loc 1 133 0
 1515 000c FFF7FEFF 		bl	MX_GPIO_Init
 1516              	.LVL153:
 134:Src/main.c    ****     MX_TIM3_Init();
 1517              		.loc 1 134 0
 1518 0010 FFF7FEFF 		bl	MX_DMA_Init
 1519              	.LVL154:
 135:Src/main.c    ****     MX_TIM1_Init();
 1520              		.loc 1 135 0
 1521 0014 FFF7FEFF 		bl	MX_TIM3_Init
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 41


 1522              	.LVL155:
 136:Src/main.c    ****     MX_TIM2_Init();
 1523              		.loc 1 136 0
 1524 0018 FFF7FEFF 		bl	MX_TIM1_Init
 1525              	.LVL156:
 137:Src/main.c    ****     MX_USART6_UART_Init();
 1526              		.loc 1 137 0
 1527 001c FFF7FEFF 		bl	MX_TIM2_Init
 1528              	.LVL157:
 138:Src/main.c    ****     MX_ADC1_Init();
 1529              		.loc 1 138 0
 1530 0020 FFF7FEFF 		bl	MX_USART6_UART_Init
 1531              	.LVL158:
 139:Src/main.c    ****     MX_I2C1_Init();
 1532              		.loc 1 139 0
 1533 0024 FFF7FEFF 		bl	MX_ADC1_Init
 1534              	.LVL159:
 140:Src/main.c    ****     MX_TIM4_Init();
 1535              		.loc 1 140 0
 1536 0028 FFF7FEFF 		bl	MX_I2C1_Init
 1537              	.LVL160:
 141:Src/main.c    ****     MX_TIM9_Init();
 1538              		.loc 1 141 0
 1539 002c FFF7FEFF 		bl	MX_TIM4_Init
 1540              	.LVL161:
 142:Src/main.c    ****     MX_TIM5_Init();
 1541              		.loc 1 142 0
 1542 0030 FFF7FEFF 		bl	MX_TIM9_Init
 1543              	.LVL162:
 143:Src/main.c    ****     /* USER CODE BEGIN 2 */
 1544              		.loc 1 143 0
 1545 0034 FFF7FEFF 		bl	MX_TIM5_Init
 1546              	.LVL163:
 160:Src/main.c    ****     HAL_TIM_Encoder_Start(&htim5, TIM_CHANNEL_ALL);
 1547              		.loc 1 160 0
 1548 0038 7848     		ldr	r0, .L114
 1549 003a 1821     		movs	r1, #24
 1550 003c FFF7FEFF 		bl	HAL_TIM_Encoder_Start
 1551              	.LVL164:
 161:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_1);
 1552              		.loc 1 161 0
 1553 0040 7748     		ldr	r0, .L114+4
 1554 0042 1821     		movs	r1, #24
 1555 0044 FFF7FEFF 		bl	HAL_TIM_Encoder_Start
 1556              	.LVL165:
 162:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_2);
 1557              		.loc 1 162 0
 1558 0048 764C     		ldr	r4, .L114+8
 1559 004a 2046     		mov	r0, r4
 1560 004c 0021     		movs	r1, #0
 1561 004e FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1562              	.LVL166:
 163:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_3);
 1563              		.loc 1 163 0
 1564 0052 2046     		mov	r0, r4
 1565 0054 0421     		movs	r1, #4
 1566 0056 FFF7FEFF 		bl	HAL_TIM_PWM_Start
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 42


 1567              	.LVL167:
 164:Src/main.c    ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_4);
 1568              		.loc 1 164 0
 1569 005a 2046     		mov	r0, r4
 1570 005c 0821     		movs	r1, #8
 1571 005e FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1572              	.LVL168:
 165:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_1);
 1573              		.loc 1 165 0
 1574 0062 2046     		mov	r0, r4
 1575 0064 0C21     		movs	r1, #12
 1576 0066 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1577              	.LVL169:
 166:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_2);
 1578              		.loc 1 166 0
 1579 006a 6F4C     		ldr	r4, .L114+12
 1580 006c 2046     		mov	r0, r4
 1581 006e 0021     		movs	r1, #0
 1582 0070 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1583              	.LVL170:
 167:Src/main.c    ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_3);
 1584              		.loc 1 167 0
 1585 0074 2046     		mov	r0, r4
 1586 0076 0421     		movs	r1, #4
 1587 0078 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1588              	.LVL171:
 168:Src/main.c    **** 
 1589              		.loc 1 168 0
 1590 007c 2046     		mov	r0, r4
 1591 007e 0821     		movs	r1, #8
 1592 0080 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1593              	.LVL172:
 171:Src/main.c    ****     print("Starting", 0);
 1594              		.loc 1 171 0
 1595 0084 FFF7FEFF 		bl	ssd1306_Init
 1596              	.LVL173:
 172:Src/main.c    ****     claw_init(&htim3);
 1597              		.loc 1 172 0
 1598 0088 6848     		ldr	r0, .L114+16
 1599 008a 0021     		movs	r1, #0
 1600 008c FFF7FEFF 		bl	print
 1601              	.LVL174:
 173:Src/main.c    ****     ///basket_init(&htim3);
 1602              		.loc 1 173 0
 1603 0090 2046     		mov	r0, r4
 1604 0092 FFF7FEFF 		bl	claw_init
 1605              	.LVL175:
 177:Src/main.c    **** 
 1606              		.loc 1 177 0
 1607 0096 0121     		movs	r1, #1
 1608 0098 0091     		str	r1, [sp]
 1609 009a 0191     		str	r1, [sp, #4]
 1610 009c 08A8     		add	r0, sp, #32
 1611 009e 0022     		movs	r2, #0
 1612 00a0 1346     		mov	r3, r2
 1613 00a2 FFF7FEFF 		bl	pid_Init
 1614              	.LVL176:
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 43


 179:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, RIGHT_SPEED);
 1615              		.loc 1 179 0
 1616 00a6 0020     		movs	r0, #0
 1617 00a8 614B     		ldr	r3, .L114+20
 1618 00aa 1988     		ldrh	r1, [r3]
 1619 00ac FFF7FEFF 		bl	set_motor_speed
 1620              	.LVL177:
 180:Src/main.c    ****     uint32_t temp_time = HAL_GetTick();
 1621              		.loc 1 180 0
 1622 00b0 0820     		movs	r0, #8
 1623 00b2 604B     		ldr	r3, .L114+24
 1624 00b4 1988     		ldrh	r1, [r3]
 1625 00b6 FFF7FEFF 		bl	set_motor_speed
 1626              	.LVL178:
 181:Src/main.c    ****     while ((HAL_GetTick() - temp_time) < 4000)
 1627              		.loc 1 181 0
 1628 00ba FFF7FEFF 		bl	HAL_GetTick
 1629              	.LVL179:
 1630 00be 0446     		mov	r4, r0
 1631              	.LVL180:
 182:Src/main.c    ****     {
 1632              		.loc 1 182 0
 1633 00c0 02E0     		b	.L100
 1634              	.LVL181:
 1635              	.L101:
 184:Src/main.c    ****     }
 1636              		.loc 1 184 0
 1637 00c2 08A8     		add	r0, sp, #32
 1638 00c4 FFF7FEFF 		bl	drive_straight
 1639              	.LVL182:
 1640              	.L100:
 182:Src/main.c    ****     {
 1641              		.loc 1 182 0
 1642 00c8 FFF7FEFF 		bl	HAL_GetTick
 1643              	.LVL183:
 1644 00cc 001B     		subs	r0, r0, r4
 1645 00ce B0F57A6F 		cmp	r0, #4000
 1646 00d2 F6D3     		bcc	.L101
 186:Src/main.c    ****     set_motor_speed(TIM_CHANNEL_3, 0);
 1647              		.loc 1 186 0
 1648 00d4 0020     		movs	r0, #0
 1649 00d6 0146     		mov	r1, r0
 1650 00d8 FFF7FEFF 		bl	set_motor_speed
 1651              	.LVL184:
 187:Src/main.c    **** 
 1652              		.loc 1 187 0
 1653 00dc 0820     		movs	r0, #8
 1654 00de 0021     		movs	r1, #0
 1655 00e0 FFF7FEFF 		bl	set_motor_speed
 1656              	.LVL185:
 190:Src/main.c    ****     /* USER CODE END 2 */
 1657              		.loc 1 190 0
 1658 00e4 0620     		movs	r0, #6
 1659 00e6 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 1660              	.LVL186:
 176:Src/main.c    ****     PID_t enc_pid = pid_Init(1, 0, 0, 1, 1);
 1661              		.loc 1 176 0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 44


 1662 00ea 0025     		movs	r5, #0
 1663              	.LVL187:
 1664              	.L102:
 200:Src/main.c    ****         {
 1665              		.loc 1 200 0
 1666 00ec 524B     		ldr	r3, .L114+28
 1667 00ee 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1668 00f0 012B     		cmp	r3, #1
 1669 00f2 74D1     		bne	.L103
 1670              	.LBB5:
 202:Src/main.c    ****             turn();
 1671              		.loc 1 202 0
 1672 00f4 5148     		ldr	r0, .L114+32
 1673 00f6 0021     		movs	r1, #0
 1674 00f8 FFF7FEFF 		bl	print
 1675              	.LVL188:
 203:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_1, LEFT_SPEED);
 1676              		.loc 1 203 0
 1677 00fc FFF7FEFF 		bl	turn
 1678              	.LVL189:
 204:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_3, RIGHT_SPEED);
 1679              		.loc 1 204 0
 1680 0100 0020     		movs	r0, #0
 1681 0102 4B4B     		ldr	r3, .L114+20
 1682 0104 1988     		ldrh	r1, [r3]
 1683 0106 FFF7FEFF 		bl	set_motor_speed
 1684              	.LVL190:
 205:Src/main.c    ****             uint32_t start = HAL_GetTick();
 1685              		.loc 1 205 0
 1686 010a 0820     		movs	r0, #8
 1687 010c 494B     		ldr	r3, .L114+24
 1688 010e 1988     		ldrh	r1, [r3]
 1689 0110 FFF7FEFF 		bl	set_motor_speed
 1690              	.LVL191:
 206:Src/main.c    ****             HAL_NVIC_EnableIRQ(CLAW_INT_EXTI_IRQn);
 1691              		.loc 1 206 0
 1692 0114 FFF7FEFF 		bl	HAL_GetTick
 1693              	.LVL192:
 1694 0118 0446     		mov	r4, r0
 1695              	.LVL193:
 207:Src/main.c    ****             while ((HAL_GetTick() - start) < 4000)
 1696              		.loc 1 207 0
 1697 011a 0A20     		movs	r0, #10
 1698              	.LVL194:
 1699 011c FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 1700              	.LVL195:
 208:Src/main.c    ****             {
 1701              		.loc 1 208 0
 1702 0120 4BE0     		b	.L104
 1703              	.L109:
 210:Src/main.c    ****                 if (CLAW_INT_STATE == FLAGGED)
 1704              		.loc 1 210 0
 1705 0122 08A8     		add	r0, sp, #32
 1706 0124 FFF7FEFF 		bl	drive_straight
 1707              	.LVL196:
 211:Src/main.c    ****                 {
 1708              		.loc 1 211 0
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 45


 1709 0128 454B     		ldr	r3, .L114+36
 1710 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1711 012c 012B     		cmp	r3, #1
 1712 012e 44D1     		bne	.L104
 1713              	.LBB6:
 213:Src/main.c    ****                     set_motor_speed(TIM_CHANNEL_1, 0);
 1714              		.loc 1 213 0
 1715 0130 C820     		movs	r0, #200
 1716 0132 FFF7FEFF 		bl	HAL_Delay
 1717              	.LVL197:
 214:Src/main.c    ****                     set_motor_speed(TIM_CHANNEL_3, 0);
 1718              		.loc 1 214 0
 1719 0136 0020     		movs	r0, #0
 1720 0138 0146     		mov	r1, r0
 1721 013a FFF7FEFF 		bl	set_motor_speed
 1722              	.LVL198:
 215:Src/main.c    ****                     close_claw(&htim3);
 1723              		.loc 1 215 0
 1724 013e 0820     		movs	r0, #8
 1725 0140 0021     		movs	r1, #0
 1726 0142 FFF7FEFF 		bl	set_motor_speed
 1727              	.LVL199:
 216:Src/main.c    ****                     arm_up(&htim3);
 1728              		.loc 1 216 0
 1729 0146 384C     		ldr	r4, .L114+12
 1730              	.LVL200:
 1731 0148 2046     		mov	r0, r4
 1732 014a FFF7FEFF 		bl	close_claw
 1733              	.LVL201:
 217:Src/main.c    ****                     HAL_NVIC_DisableIRQ(CLAW_INT_EXTI_IRQn);
 1734              		.loc 1 217 0
 1735 014e 2046     		mov	r0, r4
 1736 0150 FFF7FEFF 		bl	arm_up
 1737              	.LVL202:
 218:Src/main.c    ****                     CLAW_INT_STATE = NOT_FLAGGED;
 1738              		.loc 1 218 0
 1739 0154 0A20     		movs	r0, #10
 1740 0156 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 1741              	.LVL203:
 219:Src/main.c    ****                     ++ewok_cnt;
 1742              		.loc 1 219 0
 1743 015a 0024     		movs	r4, #0
 1744 015c 384B     		ldr	r3, .L114+36
 1745 015e 1C70     		strb	r4, [r3]
 220:Src/main.c    ****                     char msg[18] = "";
 1746              		.loc 1 220 0
 1747 0160 0135     		adds	r5, r5, #1
 1748              	.LVL204:
 1749 0162 EDB2     		uxtb	r5, r5
 1750              	.LVL205:
 221:Src/main.c    ****                     sprintf(msg, "wok_cnt: %d", ewok_cnt);
 1751              		.loc 1 221 0
 1752 0164 0394     		str	r4, [sp, #12]
 1753 0166 0494     		str	r4, [sp, #16]
 1754 0168 0594     		str	r4, [sp, #20]
 1755 016a 0694     		str	r4, [sp, #24]
 1756 016c ADF81C40 		strh	r4, [sp, #28]	@ movhi
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 46


 222:Src/main.c    ****                     print(msg, 0);
 1757              		.loc 1 222 0
 1758 0170 03A8     		add	r0, sp, #12
 1759 0172 3449     		ldr	r1, .L114+40
 1760 0174 2A46     		mov	r2, r5
 1761 0176 FFF7FEFF 		bl	sprintf
 1762              	.LVL206:
 223:Src/main.c    ****                     if (ewok_cnt == 1)
 1763              		.loc 1 223 0
 1764 017a 03A8     		add	r0, sp, #12
 1765 017c 2146     		mov	r1, r4
 1766 017e FFF7FEFF 		bl	print
 1767              	.LVL207:
 224:Src/main.c    ****                     {
 1768              		.loc 1 224 0
 1769 0182 012D     		cmp	r5, #1
 1770 0184 1FD1     		bne	.L108
 226:Src/main.c    ****                         open_claw(&htim3);
 1771              		.loc 1 226 0
 1772 0186 8820     		movs	r0, #136
 1773 0188 FFF7FEFF 		bl	turn_deg
 1774              	.LVL208:
 227:Src/main.c    ****                         square_edge(&enc_pid);
 1775              		.loc 1 227 0
 1776 018c 2648     		ldr	r0, .L114+12
 1777 018e FFF7FEFF 		bl	open_claw
 1778              	.LVL209:
 228:Src/main.c    ****                         start = HAL_GetTick();
 1779              		.loc 1 228 0
 1780 0192 08A8     		add	r0, sp, #32
 1781 0194 FFF7FEFF 		bl	square_edge
 1782              	.LVL210:
 229:Src/main.c    ****                         while ((HAL_GetTick() - start) < 2000)
 1783              		.loc 1 229 0
 1784 0198 FFF7FEFF 		bl	HAL_GetTick
 1785              	.LVL211:
 1786 019c 0446     		mov	r4, r0
 1787              	.LVL212:
 230:Src/main.c    ****                         {
 1788              		.loc 1 230 0
 1789 019e 02E0     		b	.L106
 1790              	.LVL213:
 1791              	.L107:
 232:Src/main.c    ****                         }
 1792              		.loc 1 232 0
 1793 01a0 08A8     		add	r0, sp, #32
 1794 01a2 FFF7FEFF 		bl	drive_straight
 1795              	.LVL214:
 1796              	.L106:
 230:Src/main.c    ****                         {
 1797              		.loc 1 230 0
 1798 01a6 FFF7FEFF 		bl	HAL_GetTick
 1799              	.LVL215:
 1800 01aa 001B     		subs	r0, r0, r4
 1801 01ac B0F5FA6F 		cmp	r0, #2000
 1802 01b0 F6D3     		bcc	.L107
 234:Src/main.c    ****                     }
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 47


 1803              		.loc 1 234 0
 1804 01b2 1D48     		ldr	r0, .L114+12
 1805 01b4 FFF7FEFF 		bl	arm_down
 1806              	.LVL216:
 1807 01b8 05E0     		b	.L108
 1808              	.L104:
 1809              	.LBE6:
 208:Src/main.c    ****             {
 1810              		.loc 1 208 0
 1811 01ba FFF7FEFF 		bl	HAL_GetTick
 1812              	.LVL217:
 1813 01be 001B     		subs	r0, r0, r4
 1814 01c0 B0F57A6F 		cmp	r0, #4000
 1815 01c4 ADD3     		bcc	.L109
 1816              	.LVL218:
 1817              	.L108:
 241:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_1, 0);
 1818              		.loc 1 241 0
 1819 01c6 0024     		movs	r4, #0
 1820 01c8 1B4B     		ldr	r3, .L114+28
 1821 01ca 1C70     		strb	r4, [r3]
 242:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_3, 0);
 1822              		.loc 1 242 0
 1823 01cc 2046     		mov	r0, r4
 1824 01ce 2146     		mov	r1, r4
 1825 01d0 FFF7FEFF 		bl	set_motor_speed
 1826              	.LVL219:
 243:Src/main.c    ****         }
 1827              		.loc 1 243 0
 1828 01d4 0820     		movs	r0, #8
 1829 01d6 2146     		mov	r1, r4
 1830 01d8 FFF7FEFF 		bl	set_motor_speed
 1831              	.LVL220:
 1832              	.LBE5:
 1833 01dc 86E7     		b	.L102
 1834              	.L103:
 250:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_1, LEFT_SPEED);
 1835              		.loc 1 250 0
 1836 01de FFF7FEFF 		bl	HAL_GetTick
 1837              	.LVL221:
 1838 01e2 0446     		mov	r4, r0
 1839              	.LVL222:
 251:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_3, RIGHT_SPEED);
 1840              		.loc 1 251 0
 1841 01e4 0020     		movs	r0, #0
 1842              	.LVL223:
 1843 01e6 124B     		ldr	r3, .L114+20
 1844 01e8 1988     		ldrh	r1, [r3]
 1845 01ea FFF7FEFF 		bl	set_motor_speed
 1846              	.LVL224:
 252:Src/main.c    ****             while ((HAL_GetTick() - temp_time) < 200)
 1847              		.loc 1 252 0
 1848 01ee 0820     		movs	r0, #8
 1849 01f0 104B     		ldr	r3, .L114+24
 1850 01f2 1988     		ldrh	r1, [r3]
 1851 01f4 FFF7FEFF 		bl	set_motor_speed
 1852              	.LVL225:
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 48


 253:Src/main.c    ****             {
 1853              		.loc 1 253 0
 1854 01f8 02E0     		b	.L111
 1855              	.L112:
 255:Src/main.c    ****             }
 1856              		.loc 1 255 0
 1857 01fa 08A8     		add	r0, sp, #32
 1858 01fc FFF7FEFF 		bl	drive_straight
 1859              	.LVL226:
 1860              	.L111:
 253:Src/main.c    ****             {
 1861              		.loc 1 253 0
 1862 0200 FFF7FEFF 		bl	HAL_GetTick
 1863              	.LVL227:
 1864 0204 001B     		subs	r0, r0, r4
 1865 0206 C728     		cmp	r0, #199
 1866 0208 F7D9     		bls	.L112
 257:Src/main.c    ****             set_motor_speed(TIM_CHANNEL_3, 0);
 1867              		.loc 1 257 0
 1868 020a 0020     		movs	r0, #0
 1869 020c 0146     		mov	r1, r0
 1870 020e FFF7FEFF 		bl	set_motor_speed
 1871              	.LVL228:
 258:Src/main.c    ****         }
 1872              		.loc 1 258 0
 1873 0212 0820     		movs	r0, #8
 1874 0214 0021     		movs	r1, #0
 1875 0216 FFF7FEFF 		bl	set_motor_speed
 1876              	.LVL229:
 1877 021a 67E7     		b	.L102
 1878              	.L115:
 1879              		.align	2
 1880              	.L114:
 1881 021c 00000000 		.word	htim4
 1882 0220 00000000 		.word	htim5
 1883 0224 00000000 		.word	htim1
 1884 0228 00000000 		.word	htim3
 1885 022c 00000000 		.word	.LC0
 1886 0230 00000000 		.word	.LANCHOR1
 1887 0234 00000000 		.word	.LANCHOR0
 1888 0238 00000000 		.word	PI_INT_STATE
 1889 023c 7C000000 		.word	.LC11
 1890 0240 00000000 		.word	CLAW_INT_STATE
 1891 0244 88000000 		.word	.LC12
 1892              		.cfi_endproc
 1893              	.LFE124:
 1895              		.comm	adc_values,8192,4
 1896              		.comm	dma_buffer,8192,4
 1897              		.global	RIGHT_SPEED
 1898              		.global	LEFT_SPEED
 1899              		.section	.data.RIGHT_SPEED,"aw",%progbits
 1900              		.align	1
 1901              		.set	.LANCHOR0,. + 0
 1904              	RIGHT_SPEED:
 1905 0000 5802     		.short	600
 1906              		.section	.data.LEFT_SPEED,"aw",%progbits
 1907              		.align	1
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 49


 1908              		.set	.LANCHOR1,. + 0
 1911              	LEFT_SPEED:
 1912 0000 5802     		.short	600
 1913              		.section	.rodata.str1.4,"aMS",%progbits,1
 1914              		.align	2
 1915              	.LC0:
 1916 0000 53746172 		.ascii	"Starting\000"
 1916      74696E67 
 1916      00
 1917 0009 000000   		.space	3
 1918              	.LC1:
 1919 000c 256C7500 		.ascii	"%lu\000"
 1920              	.LC2:
 1921 0010 636E7473 		.ascii	"cnts: %d\000"
 1921      3A202564 
 1921      00
 1922 0019 000000   		.space	3
 1923              	.LC3:
 1924 001c 766C7473 		.ascii	"vlts: %d.%d\000"
 1924      3A202564 
 1924      2E256400 
 1925              	.LC4:
 1926 0028 54494D35 		.ascii	"TIM5->CNT: %lu\000"
 1926      2D3E434E 
 1926      543A2025 
 1926      6C7500
 1927 0037 00       		.space	1
 1928              	.LC5:
 1929 0038 54494D34 		.ascii	"TIM4->CNT: %lu\000"
 1929      2D3E434E 
 1929      543A2025 
 1929      6C7500
 1930 0047 00       		.space	1
 1931              	.LC6:
 1932 0048 4C533A20 		.ascii	"LS: %lu\000"
 1932      256C7500 
 1933              	.LC7:
 1934 0050 52533A20 		.ascii	"RS: %lu\000"
 1934      256C7500 
 1935              	.LC8:
 1936 0058 63685F35 		.ascii	"ch_5: %d\000"
 1936      3A202564 
 1936      00
 1937 0061 000000   		.space	3
 1938              	.LC9:
 1939 0064 63685F34 		.ascii	"ch_4: %d\000"
 1939      3A202564 
 1939      00
 1940 006d 000000   		.space	3
 1941              	.LC10:
 1942 0070 5372632F 		.ascii	"Src/main.c\000"
 1942      6D61696E 
 1942      2E6300
 1943 007b 00       		.space	1
 1944              	.LC11:
 1945 007c 696E2070 		.ascii	"in pi int\000"
 1945      6920696E 
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 50


 1945      7400
 1946 0086 0000     		.space	2
 1947              	.LC12:
 1948 0088 776F6B5F 		.ascii	"wok_cnt: %d\000"
 1948      636E743A 
 1948      20256400 
 1949              		.text
 1950              	.Letext0:
 1951              		.file 2 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 1952              		.file 3 "/usr/local/Cellar/arm-none-eabi-gcc/20150921/arm-none-eabi/include/machine/_default_types
 1953              		.file 4 "/usr/local/Cellar/arm-none-eabi-gcc/20150921/arm-none-eabi/include/sys/_stdint.h"
 1954              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1955              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc_ex.h"
 1956              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc.h"
 1957              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1958              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1959              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 1960              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 1961              		.file 12 "Inc/fonts.h"
 1962              		.file 13 "Inc/ssd1306.h"
 1963              		.file 14 "Inc/pid.h"
 1964              		.file 15 "Drivers/CMSIS/Include/core_cm4.h"
 1965              		.file 16 "Inc/adc.h"
 1966              		.file 17 "Inc/tim.h"
 1967              		.file 18 "Inc/extern_vars.h"
 1968              		.file 19 "Inc/filter.h"
 1969              		.file 20 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1970              		.file 21 "/usr/local/Cellar/arm-none-eabi-gcc/20150921/arm-none-eabi/include/stdio.h"
 1971              		.file 22 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_cortex.h"
 1972              		.file 23 "Inc/claw.h"
 1973              		.file 24 "Inc/gpio.h"
 1974              		.file 25 "Inc/dma.h"
 1975              		.file 26 "Inc/usart.h"
 1976              		.file 27 "Inc/i2c.h"
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 51


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:21     .text.HAL_ADC_ConvCpltCallback:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:26     .text.HAL_ADC_ConvCpltCallback:0000000000000000 HAL_ADC_ConvCpltCallback
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:50     .text.HAL_ADC_ConvCpltCallback:0000000000000010 $d
                            *COM*:0000000000002000 adc_values
                            *COM*:0000000000002000 dma_buffer
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:60     .text.calculate_heading:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:65     .text.calculate_heading:0000000000000000 calculate_heading
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:96     .text.calculate_heading:0000000000000020 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:104    .text.alarm_detect:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:109    .text.alarm_detect:0000000000000000 alarm_detect
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:183    .text.alarm_detect:0000000000000078 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:192    .text.print:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:197    .text.print:0000000000000000 print
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:244    .text.print:0000000000000034 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:249    .text.menu:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:254    .text.menu:0000000000000000 menu
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:367    .text.menu:000000000000009c $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:374    .text.set_motor_speed:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:379    .text.set_motor_speed:0000000000000000 set_motor_speed
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:445    .text.set_motor_speed:000000000000004c $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:452    .text.turn:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:457    .text.turn:0000000000000000 turn
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:702    .text.turn:0000000000000178 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:725    .text.turn_deg:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:730    .text.turn_deg:0000000000000000 turn_deg
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:856    .text.turn_deg:00000000000000b0 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:868    .text.encoder_pid:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:873    .text.encoder_pid:0000000000000000 encoder_pid
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1000   .text.encoder_pid:00000000000000a0 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1009   .text.drive_straight:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1014   .text.drive_straight:0000000000000000 drive_straight
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1038   .text.square_edge:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1043   .text.square_edge:0000000000000000 square_edge
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1106   .text.square_edge:0000000000000044 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1112   .text.test_PWM_htim1:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1117   .text.test_PWM_htim1:0000000000000000 test_PWM_htim1
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1163   .text.test_PWM_htim1:0000000000000034 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1168   .text.test_PWM_htim3:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1173   .text.test_PWM_htim3:0000000000000000 test_PWM_htim3
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1212   .text.test_PWM_htim3:000000000000002c $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1217   .text.test_ADC:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1222   .text.test_ADC:0000000000000000 test_ADC
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1289   .text.test_ADC:0000000000000050 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1298   .text.test_All:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1303   .text.test_All:0000000000000000 test_All
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1328   .text._Error_Handler:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1333   .text._Error_Handler:0000000000000000 _Error_Handler
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1349   .text.SystemClock_Config:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1354   .text.SystemClock_Config:0000000000000000 SystemClock_Config
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1480   .text.SystemClock_Config:00000000000000b4 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1488   .text.main:0000000000000000 $t
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1493   .text.main:0000000000000000 main
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1881   .text.main:000000000000021c $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1904   .data.RIGHT_SPEED:0000000000000000 RIGHT_SPEED
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1911   .data.LEFT_SPEED:0000000000000000 LEFT_SPEED
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 52


/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1900   .data.RIGHT_SPEED:0000000000000000 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1907   .data.LEFT_SPEED:0000000000000000 $d
/var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s:1914   .rodata.str1.4:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
memcpy
__aeabi_ui2d
__aeabi_dmul
__aeabi_dsub
__aeabi_d2f
__aeabi_dcmplt
__aeabi_dcmpgt
HAL_ADC_Start_DMA
HAL_Delay
goertzel
HAL_ADC_Stop_DMA
hadc1
IR_INT_STATE
ssd1306_Fill
ssd1306_SetCursor
ssd1306_WriteString
ssd1306_UpdateScreen
Font_7x10
HAL_GPIO_ReadPin
sprintf
pid_Init
htim1
__aeabi_f2d
__aeabi_d2uiz
__aeabi_i2d
__aeabi_dadd
pid_GetGain
EDGE_LEFT_STATE
EDGE_RIGHT_STATE
HAL_TIM_PWM_Start
htim3
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_RCC_GetHCLKFreq
HAL_SYSTICK_Config
HAL_SYSTICK_CLKSourceConfig
HAL_NVIC_SetPriority
HAL_Init
MX_GPIO_Init
MX_DMA_Init
MX_TIM3_Init
MX_TIM1_Init
MX_TIM2_Init
MX_USART6_UART_Init
MX_ADC1_Init
MX_I2C1_Init
MX_TIM4_Init
MX_TIM9_Init
MX_TIM5_Init
HAL_TIM_Encoder_Start
ssd1306_Init
ARM GAS  /var/folders/ck/4xtm3skj1ssb0w4rn7_4q_gw0000gn/T//ccycnRrD.s 			page 53


claw_init
HAL_GetTick
HAL_NVIC_EnableIRQ
close_claw
arm_up
HAL_NVIC_DisableIRQ
open_claw
arm_down
htim4
htim5
PI_INT_STATE
CLAW_INT_STATE
